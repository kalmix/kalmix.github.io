import{j as e}from"./jsx-runtime.7faW4zRM.js";import{r}from"./index.DhYZZe0J.js";function D({data:g,onAddOrRemove:x,isItemInCart:n,getItemQuantity:m}){const{id:i,image:p,name:d,weight:u,dimensions:s}=g,[a,b]=r.useState(s[0]),[y,N]=r.useState("1"),[v,w]=r.useState("");r.useEffect(()=>{const o=m(i,a);N(o>0?o.toString():"1")},[a,i,m]);const R=o=>{b(o)},C=o=>{const l=o.target.value;/^\d*$/.test(l)?(N(l),w(""),l!==""&&parseInt(l,10)<1&&w("La cantidad debe ser al menos 1"),n(i,a)&&l!==""&&parseInt(l,10)>=1&&E(parseInt(l,10))):w("Por favor, ingrese solo números")},k=()=>{(y===""||parseInt(y,10)<1)&&(N("1"),w(""),n(i,a)&&E(1))},E=o=>{const l=n(i,a);x({id:i,name:d,weight:u,dimension:a,quantity:o!==void 0?o:parseInt(y,10)},l&&(o===0||o===void 0))},S=n(i,a);return e.jsxs("div",{className:"flex flex-col min-h-[350px] p-5 rounded-lg shadow-xl",children:[e.jsx("img",{src:p,className:"w-full h-48 object-cover mb-4",alt:d}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-2xl",children:d}),e.jsx("h3",{className:"text-gray-600",children:u}),e.jsx("div",{className:"flex flex-wrap my-5 gap-2",children:s.map((o,l)=>e.jsx("div",{className:`px-2 py-1 rounded-xl border-2 transition-[400ms] cursor-pointer font-bold ${a===o?"border-slate-800 bg-slate-100":"border-slate-200 hover:border-slate-400"}`,onClick:()=>R(o),children:o},l))}),e.jsxs("div",{className:"my-5 flex flex-col gap-y-2",children:[e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsx("h2",{className:"font-semibold",children:"CANTIDAD:"}),e.jsx("input",{name:"quantity",type:"text",inputMode:"numeric",className:`border-2 rounded w-20 px-2 py-1 focus:outline-none focus:ring-2 focus:border-transparent ${v?"border-red-500 focus:ring-red-500":"border-slate-300 focus:ring-blue-500"}`,value:y,onChange:C,onBlur:k})]}),v&&e.jsx("p",{className:"text-red-500 text-sm",children:v})]})]}),e.jsx("button",{className:`px-4 py-2 text-white rounded transition-colors ${S?"bg-red-600 hover:bg-red-700":"bg-[#031059] hover:bg-blue-800"}`,onClick:()=>E(),children:S?"Eliminar de la cotización":"Agregar a la cotización"})]})}const O="http://localhost:4321",I={redirect:O};function z(g){const{items:x,setShow:n,setItems:m}=g,[i,p]=r.useState("");r.useEffect(()=>(x.map(s=>p(a=>a+`
----------------
Nombre: ${s.name}
Dimension: ${s.dimension}
Cantidad: ${s.quantity}`)),document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),r.useEffect(()=>{x.length==0&&n(!1)},[x]);function d(s){m(a=>a.filter(b=>!(b.name===s.name&&b.dimension===s.dimension)))}function u(s){s.preventDefault(),console.log(i)}return e.jsx("section",{className:"position-fixed inset-0 bg-black/40 backdrop-blur-md flex items-center justify-center z-20",children:e.jsxs("form",{name:"Cotizacion",className:"w-[90%] max-w-[600px] max-h-[90vh] p-5 rounded-xl bg-[#031059] flex flex-col",onSubmit:u,children:[e.jsx("h1",{className:"text-2xl text-center font-bold mb-4 underline text-white",children:"Cotización"}),e.jsxs("div",{className:"flex flex-col gap-y-4 mb-4",children:[e.jsx("h2",{className:"font-bold text-xl text-white",children:"EMBALAJES:"}),e.jsx("div",{className:"max-h-[200px] overflow-y-auto p-5 rounded",children:x.map((s,a)=>e.jsxs("div",{className:"flex justify-between mb-4 max-h-[10em] last:mb-0 bg-[#4F5E8C] shadow px-4 py-2 text-white",children:[e.jsxs("div",{className:"",children:[e.jsx("h2",{className:"font-bold text-xl",children:s.name}),e.jsx("h2",{className:"text-slate-300",children:s.dimension}),e.jsxs("h2",{children:["Cantidad: ",s.quantity]})]}),e.jsx("button",{className:"min-h-[100%] px-2 bg-[#031059] text-white rounded hover:bg-red-600 transition-colors",onClick:()=>d(s),type:"button",children:e.jsxs("svg",{width:"25px",height:"25px",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:0}),e.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsxs("g",{id:"SVGRepo_iconCarrier",children:[e.jsx("path",{d:"M4 2H1V4H15V2H12V0H4V2Z",fill:"#FFFFFF"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 6H13V16H3V6ZM7 9H9V13H7V9Z",fill:"#FFFFFF"})]})]})})]},a))})]}),e.jsxs("div",{className:"flex flex-col gap-y-4 mb-4",children:[e.jsx("h2",{className:"font-bold text-xl text-white",children:"RNC/CEDULA:"}),e.jsx("input",{name:"RNC/Cedula",type:"rnc_cedula",className:"outline-none border-b-4 px-2 py-2 focus:border-b-blue-600 transition-[400ms]",required:!0}),e.jsx("h2",{className:"font-bold text-xl text-white",children:"UBICACIÓN:"}),e.jsx("input",{name:"Ubicacion",type:"text",className:"outline-none border-b-4 px-2 py-2 focus:border-b-blue-600 transition-[400ms]",required:!0}),e.jsx("h2",{className:"font-bold text-xl text-white",children:"CORREO ELECTRÓNICO:"}),e.jsx("input",{name:"Correo",type:"email",className:"outline-none border-b-4 px-2 py-2 focus:border-b-blue-600 transition-[400ms]",required:!0})]}),e.jsx("input",{type:"hidden",name:"Asunto",value:"Cotizacion"}),e.jsx("input",{type:"hidden",name:"Embalajes a cotizar",value:i}),e.jsx("input",{type:"hidden",name:"_next",value:I.redirect}),e.jsx("input",{type:"hidden",name:"_captcha",value:"false"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{className:"bg-gray-500 text-white px-5 py-2 rounded hover:bg-gray-600 transition-colors",onClick:()=>n(!1),children:"CANCELAR"}),e.jsx("button",{className:"bg-blue-900 text-white px-5 py-2 rounded hover:bg-blue-800 transition-colors",type:"submit",children:"ENVIAR CORREO"})]})]})})}function V({current:g,setCurrent:x}){const n=["TODOS","Opcion 1","Opcion 2","Opcion 3"],[m,i]=r.useState(!1);function p(d){x(d),i(!1)}return e.jsxs("div",{className:"relative px-4 py-2 border-2",children:[e.jsxs("div",{className:"flex gap-x-2 items-center justify-center cursor-pointer min-w-24",onClick:()=>i(!m),children:[e.jsx("h3",{className:"font-bold",children:g}),e.jsx("img",{src:"/assets/dropdown.svg",className:"w-5",alt:""})]}),m&&e.jsx("ul",{className:"absolute flex flex-col top-10 left-0 py-2 w-[100%] border-2 bg-white z-10",children:n.map((d,u)=>e.jsx("li",{className:"py-1 cursor-pointer hover:bg-black/20 px-4",onClick:()=>p(d),children:d},u))})]})}function $(){const[g,x]=r.useState("TODOS"),[n,m]=r.useState([]),[i,p]=r.useState(!1),[d,u]=r.useState(!1),[s,a]=r.useState(1),b=3,y=()=>{const t=new Date,c=new Date(t.getTime()-30*24*60*60*1e3);return new Date(c.getTime()+Math.random()*(t.getTime()-c.getTime()))},N=Array.from({length:12},(t,c)=>({id:c+1,image:"https://ucarecdn.com/d3c9153b-ca04-40ca-a3be-3c26360a51d6/-/preview/600x400/",name:`Item ${c+1}`,condition:"Nuevo",material:"Wood",weight:"100 a 150 kg",dimensions:["700 x 500 mm","1200 x 800 mm","1500 x 1000 mm","1500 x 1500 mm"],staticC:"20kg",dynamicC:"10kg",date:y()})),v=s*b,w=v-b,R=N.slice(w,v),C=Math.ceil(N.length/b);r.useEffect(()=>{console.log(n)},[n]);const k=(t,c=!1)=>{m(h=>{const f=h.findIndex(j=>j.id===t.id&&j.dimension===t.dimension);if(f>-1){if(c)return h.filter((j,A)=>A!==f);{const j=[...h];return j[f]={...j[f],quantity:t.quantity},j}}else return[...h,t]})},E=(t,c)=>n.some(h=>h.id===t&&h.dimension===c),S=(t,c)=>{const h=n.find(f=>f.id===t&&f.dimension===c);return h?h.quantity:0},o=t=>{a(t)},l=()=>{a(t=>Math.max(t-1,1))},F=()=>{a(t=>Math.min(t+1,C))};return e.jsxs(e.Fragment,{children:[i&&e.jsx(z,{setShow:p,items:n,setItems:m}),e.jsxs("section",{className:"w-full min-h-[20em] max-w-[2000px] py-10 px-10 lg:px-36",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-x-3 gap-y-5 mb-8",children:[e.jsxs("div",{className:"relative",onMouseEnter:()=>u(n.length===0),onMouseLeave:()=>u(!1),children:[e.jsxs("button",{className:`px-14 py-2 text-white relative rounded ${n.length!==0?"bg-blue":"bg-blue/10 text-blue"}`,disabled:n.length===0,onClick:()=>p(!0),children:[e.jsx("h2",{className:"text-lg font-bold",children:"Cotizar"}),n.length!==0&&e.jsx("h4",{className:"rounded-full w-8 h-8 font-bold flex items-center justify-center absolute -right-2 -top-2 bg-red-400",children:n.length})]}),d&&e.jsx("div",{className:"absolute top-14 left-1/2 transform -translate-x-1/2 bg-white border border-gray-300 shadow-lg rounded-md p-4 z-20",children:e.jsx("p",{className:"text-sm",children:"Por favor selecciona algún producto antes de cotizar."})})]}),e.jsxs("div",{className:"flex items-center gap-x-5",children:[e.jsx("h3",{children:"FILTRAR POR"})," ",e.jsx(V,{current:g,setCurrent:x})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-h-[600px] overflow-y-scroll hide-scrollbar",children:R.map(t=>e.jsx(D,{data:t,onAddOrRemove:k,isItemInCart:E,getItemQuantity:S},t.id))}),e.jsxs("div",{className:"mt-6 flex justify-center items-center",children:[e.jsx("button",{onClick:l,disabled:s===1,className:`mx-1 px-3 py-1 border rounded ${s===1?"bg-gray-200 text-gray-400":"bg-white text-[#4F5E8C]"}`,children:"← "}),Array.from({length:C},(t,c)=>c+1).map(t=>e.jsx("button",{onClick:()=>o(t),className:`mx-1 px-3 py-1 border rounded ${s===t?"bg-blue text-white":"bg-white text-[#4F5E8C]"}`,children:t},t)),e.jsx("button",{onClick:F,disabled:s===C,className:`mx-1 px-3 py-1 border rounded ${s===C?"bg-gray-200 text-gray-400":"bg-white text-[#4F5E8C]"}`,children:"→ "})]})]})]})}export{$ as default};
