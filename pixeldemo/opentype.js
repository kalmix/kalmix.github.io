function Tree(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function Data(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new Tree,this.dtree=new Tree}function tinf_build_bits_base(e,t,r,a){var n,s;for(n=0;n<r;++n)e[n]=0;for(n=0;n<30-r;++n)e[n+r]=n/r|0;for(s=a,n=0;n<30;++n)t[n]=s,s+=1<<e[n]}function tinf_build_fixed_trees(e,t){var r;for(r=0;r<7;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;r<24;++r)e.trans[r]=256+r;for(r=0;r<144;++r)e.trans[24+r]=r;for(r=0;r<8;++r)e.trans[168+r]=280+r;for(r=0;r<112;++r)e.trans[176+r]=144+r;for(r=0;r<5;++r)t.table[r]=0;for(t.table[5]=32,r=0;r<32;++r)t.trans[r]=r}function tinf_build_tree(e,t,r,a){var n,s;for(n=0;n<16;++n)e.table[n]=0;for(n=0;n<a;++n)e.table[t[r+n]]++;for(e.table[0]=0,s=0,n=0;n<16;++n)offs[n]=s,s+=e.table[n];for(n=0;n<a;++n)t[r+n]&&(e.trans[offs[t[r+n]]++]=n)}function tinf_getbit(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function tinf_read_bits(e,t,r){if(!t)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var a=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,a+r}function tinf_decode_symbol(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=0,a=0,n=0,s=e.tag;do{a=2*a+(1&s),s>>>=1,++n,r+=t.table[n],a-=t.table[n]}while(a>=0);return e.tag=s,e.bitcount-=n,t.trans[r+a]}function tinf_decode_trees(e,t,r){var a,n,s,o,i,u;for(a=tinf_read_bits(e,5,257),n=tinf_read_bits(e,5,1),s=tinf_read_bits(e,4,4),o=0;o<19;++o)lengths[o]=0;for(o=0;o<s;++o){var l=tinf_read_bits(e,3,0);lengths[clcidx[o]]=l}for(tinf_build_tree(code_tree,lengths,0,19),i=0;i<a+n;){var p=tinf_decode_symbol(e,code_tree);switch(p){case 16:var c=lengths[i-1];for(u=tinf_read_bits(e,2,3);u;--u)lengths[i++]=c;break;case 17:for(u=tinf_read_bits(e,3,3);u;--u)lengths[i++]=0;break;case 18:for(u=tinf_read_bits(e,7,11);u;--u)lengths[i++]=0;break;default:lengths[i++]=p}}tinf_build_tree(t,lengths,0,a),tinf_build_tree(r,lengths,a,n)}function tinf_inflate_block_data(e,t,r){for(;;){var a,n,s,o,i=tinf_decode_symbol(e,t);if(256===i)return TINF_OK;if(i<256)e.dest[e.destLen++]=i;else for(i-=257,a=tinf_read_bits(e,length_bits[i],length_base[i]),n=tinf_decode_symbol(e,r),s=e.destLen-tinf_read_bits(e,dist_bits[n],dist_base[n]),o=s;o<s+a;++o)e.dest[e.destLen++]=e.dest[o]}}function tinf_inflate_uncompressed_block(e){for(var t,r,a;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if(t=e.source[e.sourceIndex+1],t=256*t+e.source[e.sourceIndex],r=e.source[e.sourceIndex+3],r=256*r+e.source[e.sourceIndex+2],t!==(65535&~r))return TINF_DATA_ERROR;for(e.sourceIndex+=4,a=t;a;--a)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,TINF_OK}function tinf_uncompress(e,t){var r,a,n,s=new Data(e,t);do{switch(r=tinf_getbit(s),a=tinf_read_bits(s,2,0),a){case 0:n=tinf_inflate_uncompressed_block(s);break;case 1:n=tinf_inflate_block_data(s,sltree,sdtree);break;case 2:tinf_decode_trees(s,s.ltree,s.dtree),n=tinf_inflate_block_data(s,s.ltree,s.dtree);break;default:n=TINF_DATA_ERROR}if(n!==TINF_OK)throw new Error("Data error")}while(!r);return s.destLen<s.dest.length?"function"==typeof s.dest.slice?s.dest.slice(0,s.destLen):s.dest.subarray(0,s.destLen):s.dest}function derive(e,t,r,a,n){return Math.pow(1-n,3)*e+3*Math.pow(1-n,2)*n*t+3*(1-n)*Math.pow(n,2)*r+Math.pow(n,3)*a}function BoundingBox(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function Path(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function fail(e){throw new Error(e)}function argument(e,t){e||fail(t)}function constant(e){return function(){return e}}function isByteEncodable(e){return e>=-128&&e<=127}function encodeVarDeltaRunAsZeroes(e,t,r){for(var a=0,n=e.length;t<n&&a<64&&0===e[t];)++t,++a;return r.push(128|a-1),t}function encodeVarDeltaRunAsBytes(e,t,r){for(var a=0,n=e.length,s=t;s<n&&a<64;){var o=e[s];if(!isByteEncodable(o))break;if(0===o&&s+1<n&&0===e[s+1])break;++s,++a}r.push(a-1);for(var i=t;i<s;++i)r.push(e[i]+256&255);return s}function encodeVarDeltaRunAsWords(e,t,r){for(var a=0,n=e.length,s=t;s<n&&a<64;){var o=e[s];if(0===o)break;if(isByteEncodable(o)&&s+1<n&&isByteEncodable(e[s+1]))break;++s,++a}r.push(64|a-1);for(var i=t;i<s;++i){var u=e[i];r.push(u+65536>>8&255,u+256&255)}return s}function Table(e,t,r){if(t.length&&("coverageFormat"!==t[0].name||1===t[0].value))for(var a=0;a<t.length;a+=1){var n=t[a];this[n.name]=n.value}if(this.tableName=e,this.fields=t,r)for(var s=Object.keys(r),o=0;o<s.length;o+=1){var i=s[o],u=r[i];void 0!==this[i]&&(this[i]=u)}}function ushortList(e,t,r){void 0===r&&(r=t.length);var a=new Array(t.length+1);a[0]={name:e+"Count",type:"USHORT",value:r};for(var n=0;n<t.length;n++)a[n+1]={name:e+n,type:"USHORT",value:t[n]};return a}function tableList(e,t,r){var a=t.length,n=new Array(a+1);n[0]={name:e+"Count",type:"USHORT",value:a};for(var s=0;s<a;s++)n[s+1]={name:e+s,type:"TABLE",value:r(t[s],s)};return n}function recordList(e,t,r){var a=t.length,n=[];n[0]={name:e+"Count",type:"USHORT",value:a};for(var s=0;s<a;s++)n=n.concat(r(t[s],s));return n}function Coverage(e){1===e.format?Table.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ushortList("glyph",e.glyphs))):2===e.format?Table.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(recordList("rangeRecord",e.ranges,function(e){return[{name:"startGlyphID",type:"USHORT",value:e.start},{name:"endGlyphID",type:"USHORT",value:e.end},{name:"startCoverageIndex",type:"USHORT",value:e.index}]}))):check.assert(!1,"Coverage format must be 1 or 2.")}function ScriptList(e){Table.call(this,"scriptListTable",recordList("scriptRecord",e,function(e,t){var r=e.script,a=r.defaultLangSys;return check.assert(!!a,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new Table("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Table("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:a.reqFeatureIndex}].concat(ushortList("featureIndex",a.featureIndexes)))}].concat(recordList("langSys",r.langSysRecords,function(e,t){var r=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new Table("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(ushortList("featureIndex",r.featureIndexes)))}]})))}]}))}function FeatureList(e){Table.call(this,"featureListTable",recordList("featureRecord",e,function(e,t){var r=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new Table("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(ushortList("lookupListIndex",r.lookupListIndexes)))}]}))}function LookupList(e,t){Table.call(this,"lookupListTable",tableList("lookup",e,function(e){var r=t[e.lookupType];return check.assert(!!r,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new Table("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(tableList("subtable",e.subtables,r)))}))}function getByte(e,t){return e.getUint8(t)}function getUShort(e,t){return e.getUint16(t,!1)}function getShort(e,t){return e.getInt16(t,!1)}function getULong(e,t){return e.getUint32(t,!1)}function getFixed(e,t){var r=e.getInt16(t,!1),a=e.getUint16(t+2,!1);return r+a/65535}function getTag(e,t){for(var r="",a=t;a<t+4;a+=1)r+=String.fromCharCode(e.getInt8(a));return r}function getOffset(e,t,r){for(var a=0,n=0;n<r;n+=1)a<<=8,a+=e.getUint8(t+n);return a}function getBytes(e,t,r){for(var a=[],n=t;n<r;n+=1)a.push(e.getUint8(n));return a}function bytesToString(e){for(var t="",r=0;r<e.length;r+=1)t+=String.fromCharCode(e[r]);return t}function Parser(e,t){this.data=e,this.offset=t,this.relativeOffset=0}function parseCmapTableFormat12(e,t){var r;t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong(),e.groupCount=r=t.parseULong(),e.glyphIndexMap={};for(var a=0;a<r;a+=1)for(var n=t.parseULong(),s=t.parseULong(),o=t.parseULong(),i=n;i<=s;i+=1)e.glyphIndexMap[i]=o,o++}function parseCmapTableFormat4(e,t,r,a,n){var s;e.length=t.parseUShort(),e.language=t.parseUShort(),e.segCount=s=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};for(var o=new parse.Parser(r,a+n+14),i=new parse.Parser(r,a+n+16+2*s),u=new parse.Parser(r,a+n+16+4*s),l=new parse.Parser(r,a+n+16+6*s),p=a+n+16+8*s,c=0;c<s-1;c+=1)for(var h=void 0,f=o.parseUShort(),d=i.parseUShort(),g=u.parseShort(),v=l.parseUShort(),m=d;m<=f;m+=1)0!==v?(p=l.offset+l.relativeOffset-2,p+=v,p+=2*(m-d),h=parse.getUShort(r,p),0!==h&&(h=h+g&65535)):h=m+g&65535,e.glyphIndexMap[m]=h}function parseCmapTable(e,t){var r={};r.version=parse.getUShort(e,t),check.argument(0===r.version,"cmap table version should be 0."),r.numTables=parse.getUShort(e,t+2);for(var a=-1,n=r.numTables-1;n>=0;n-=1){var s=parse.getUShort(e,t+4+8*n),o=parse.getUShort(e,t+4+8*n+2);if(3===s&&(0===o||1===o||10===o)||0===s&&(0===o||1===o||2===o||3===o||4===o)){a=parse.getULong(e,t+4+8*n+4);break}}if(-1===a)throw new Error("No valid cmap sub-tables found.");var i=new parse.Parser(e,t+a);if(r.format=i.parseUShort(),12===r.format)parseCmapTableFormat12(r,i);else{if(4!==r.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+r.format+").");parseCmapTableFormat4(r,i,e,t,a)}return r}function addSegment(e,t,r){e.segments.push({end:t,start:t,delta:-(t-r),offset:0,glyphIndex:r})}function addTerminatorSegment(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}function makeCmapTable(e){var t,r=!0;for(t=e.length-1;t>0;t-=1){var a=e.get(t);if(a.unicode>65535){console.log("Adding CMAP format 12 (needed!)"),r=!1;break}}var n=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:r?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:r?12:20}];r||(n=n.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),n=n.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var s=new table.Table("cmap",n);for(s.segments=[],t=0;t<e.length;t+=1){for(var o=e.get(t),i=0;i<o.unicodes.length;i+=1)addSegment(s,o.unicodes[i],t);s.segments=s.segments.sort(function(e,t){return e.start-t.start})}addTerminatorSegment(s);var u=s.segments.length,l=0,p=[],c=[],h=[],f=[],d=[],g=[];for(t=0;t<u;t+=1){var v=s.segments[t];v.end<=65535&&v.start<=65535?(p=p.concat({name:"end_"+t,type:"USHORT",value:v.end}),c=c.concat({name:"start_"+t,type:"USHORT",value:v.start}),h=h.concat({name:"idDelta_"+t,type:"SHORT",value:v.delta}),f=f.concat({name:"idRangeOffset_"+t,type:"USHORT",value:v.offset}),void 0!==v.glyphId&&(d=d.concat({name:"glyph_"+t,type:"USHORT",value:v.glyphId}))):l+=1,r||void 0===v.glyphIndex||(g=g.concat({name:"cmap12Start_"+t,type:"ULONG",value:v.start}),g=g.concat({name:"cmap12End_"+t,type:"ULONG",value:v.end}),g=g.concat({name:"cmap12Glyph_"+t,type:"ULONG",value:v.glyphIndex}))}if(s.segCountX2=2*(u-l),s.searchRange=2*Math.pow(2,Math.floor(Math.log(u-l)/Math.log(2))),s.entrySelector=Math.log(s.searchRange/2)/Math.log(2),s.rangeShift=s.segCountX2-s.searchRange,s.fields=s.fields.concat(p),s.fields.push({name:"reservedPad",type:"USHORT",value:0}),s.fields=s.fields.concat(c),s.fields=s.fields.concat(h),s.fields=s.fields.concat(f),s.fields=s.fields.concat(d),s.cmap4Length=14+2*p.length+2+2*c.length+2*h.length+2*f.length+2*d.length,!r){var m=16+4*g.length;s.cmap12Offset=20+s.cmap4Length,s.fields=s.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:m},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:g.length/3}]),s.fields=s.fields.concat(g)}return s}function DefaultEncoding(e){this.font=e}function CmapEncoding(e){this.cmap=e}function CffEncoding(e,t){this.encoding=e,this.charset=t}function GlyphNames(e){switch(e.version){case 1:this.names=standardNames.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<standardNames.length?this.names[t]=standardNames[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-standardNames.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var r=0;r<e.numberOfGlyphs;r++)this.names[r]=standardNames[r+e.glyphNameIndex[r]];break;case 3:default:this.names=[]}}function addGlyphNamesAll(e){for(var t,r=e.tables.cmap.glyphIndexMap,a=Object.keys(r),n=0;n<a.length;n+=1){var s=a[n],o=r[s];t=e.glyphs.get(o),t.addUnicode(parseInt(s))}for(var i=0;i<e.glyphs.length;i+=1)t=e.glyphs.get(i),e.cffEncoding?e.isCIDFont?t.name="gid"+i:t.name=e.cffEncoding.charset[i]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(i))}function addGlyphNamesToUnicodeMap(e){e._IndexToUnicodeMap={};for(var t=e.tables.cmap.glyphIndexMap,r=Object.keys(t),a=0;a<r.length;a+=1){var n=r[a],s=t[n];void 0===e._IndexToUnicodeMap[s]?e._IndexToUnicodeMap[s]={unicodes:[parseInt(n)]}:e._IndexToUnicodeMap[s].unicodes.push(parseInt(n))}}function addGlyphNames(e,t){t.lowMemory?addGlyphNamesToUnicodeMap(e):addGlyphNamesAll(e)}function line(e,t,r,a,n){e.beginPath(),e.moveTo(t,r),e.lineTo(a,n),e.stroke()}function getPathDefinition(e,t){var r=t||new Path;return{configurable:!0,get:function(){return"function"==typeof r&&(r=r()),r},set:function(e){r=e}}}function Glyph(e){this.bindConstructorValues(e)}function defineDependentProperty(e,t,r){Object.defineProperty(e,t,{get:function(){return e.path,e[r]},set:function(t){e[r]=t},enumerable:!0,configurable:!0})}function GlyphSet(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var r=0;r<t.length;r++){var a=t[r];a.path.unitsPerEm=e.unitsPerEm,this.glyphs[r]=a}this.length=t&&t.length||0}function glyphLoader(e,t){return new Glyph({index:t,font:e})}function ttfGlyphLoader(e,t,r,a,n,s){return function(){var o=new Glyph({index:t,font:e});return o.path=function(){r(o,a,n);var t=s(e.glyphs,o);return t.unitsPerEm=e.unitsPerEm,t},defineDependentProperty(o,"xMin","_xMin"),defineDependentProperty(o,"xMax","_xMax"),defineDependentProperty(o,"yMin","_yMin"),defineDependentProperty(o,"yMax","_yMax"),o}}function cffGlyphLoader(e,t,r,a){return function(){var n=new Glyph({index:t,font:e});return n.path=function(){var t=r(e,n,a);return t.unitsPerEm=e.unitsPerEm,t},n}}function equals(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r+=1)if(!equals(e[r],t[r]))return!1;return!0}return!1}function calcCFFSubroutineBias(e){var t;return t=e.length<1240?107:e.length<33900?1131:32768,t}function parseCFFIndex(e,t,r){var a,n,s=[],o=[],i=parse.getCard16(e,t);if(0!==i){var u=parse.getByte(e,t+2);a=t+(i+1)*u+2;for(var l=t+3,p=0;p<i+1;p+=1)s.push(parse.getOffset(e,l,u)),l+=u;n=a+s[i]}else n=t+2;for(var c=0;c<s.length-1;c+=1){var h=parse.getBytes(e,a+s[c],a+s[c+1]);r&&(h=r(h)),o.push(h)}return{objects:o,startOffset:t,endOffset:n}}function parseCFFIndexLowMemory(e,t){var r,a,n=[],s=parse.getCard16(e,t);if(0!==s){var o=parse.getByte(e,t+2);r=t+(s+1)*o+2;for(var i=t+3,u=0;u<s+1;u+=1)n.push(parse.getOffset(e,i,o)),i+=o;a=r+n[s]}else a=t+2;return{offsets:n,startOffset:t,endOffset:a}}function getCffIndexObject(e,t,r,a,n){var s=parse.getCard16(r,a),o=0;if(0!==s){var i=parse.getByte(r,a+2);o=a+(s+1)*i+2}var u=parse.getBytes(r,o+t[e],o+t[e+1]);return n&&(u=n(u)),u}function parseFloatOperand(e){for(var t="",r=15,a=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var n=e.parseByte(),s=n>>4,o=15&n;if(s===r)break;if(t+=a[s],o===r)break;t+=a[o]}return parseFloat(t)}function parseOperand(e,t){var r,a,n,s;if(28===t)return r=e.parseByte(),a=e.parseByte(),r<<8|a;if(29===t)return r=e.parseByte(),a=e.parseByte(),n=e.parseByte(),s=e.parseByte(),r<<24|a<<16|n<<8|s;if(30===t)return parseFloatOperand(e);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return r=e.parseByte(),256*(t-247)+r+108;if(t>=251&&t<=254)return r=e.parseByte(),256*-(t-251)-r-108;throw new Error("Invalid b0 "+t)}function entriesToObject(e){for(var t={},r=0;r<e.length;r+=1){var a=e[r][0],n=e[r][1],s=void 0;if(s=1===n.length?n[0]:n,t.hasOwnProperty(a)&&!isNaN(t[a]))throw new Error("Object "+t+" already has key "+a);t[a]=s}return t}function parseCFFDict(e,t,r){t=void 0!==t?t:0;var a=new parse.Parser(e,t),n=[],s=[];for(r=void 0!==r?r:e.length;a.relativeOffset<r;){var o=a.parseByte();o<=21?(12===o&&(o=1200+a.parseByte()),n.push([o,s]),s=[]):s.push(parseOperand(a,o))}return entriesToObject(n)}function getCFFString(e,t){return t=t<=390?cffStandardStrings[t]:e[t-391],t}function interpretDict(e,t,r){for(var a,n={},s=0;s<t.length;s+=1){var o=t[s];if(Array.isArray(o.type)){var i=[];i.length=o.type.length;for(var u=0;u<o.type.length;u++)a=void 0!==e[o.op]?e[o.op][u]:void 0,void 0===a&&(a=void 0!==o.value&&void 0!==o.value[u]?o.value[u]:null),"SID"===o.type[u]&&(a=getCFFString(r,a)),i[u]=a;n[o.name]=i}else a=e[o.op],void 0===a&&(a=void 0!==o.value?o.value:null),"SID"===o.type&&(a=getCFFString(r,a)),n[o.name]=a}return n}function parseCFFHeader(e,t){var r={};return r.formatMajor=parse.getCard8(e,t),r.formatMinor=parse.getCard8(e,t+1),r.size=parse.getCard8(e,t+2),r.offsetSize=parse.getCard8(e,t+3),r.startOffset=t,r.endOffset=t+4,r}function parseCFFTopDict(e,t){var r=parseCFFDict(e,0,e.byteLength);return interpretDict(r,TOP_DICT_META,t)}function parseCFFPrivateDict(e,t,r,a){var n=parseCFFDict(e,t,r);return interpretDict(n,PRIVATE_DICT_META,a)}function gatherCFFTopDicts(e,t,r,a){for(var n=[],s=0;s<r.length;s+=1){var o=new DataView(new Uint8Array(r[s]).buffer),i=parseCFFTopDict(o,a);i._subrs=[],i._subrsBias=0,i._defaultWidthX=0,i._nominalWidthX=0;var u=i.private[0],l=i.private[1];if(0!==u&&0!==l){var p=parseCFFPrivateDict(e,l+t,u,a);if(i._defaultWidthX=p.defaultWidthX,i._nominalWidthX=p.nominalWidthX,0!==p.subrs){var c=l+p.subrs,h=parseCFFIndex(e,c+t);i._subrs=h.objects,i._subrsBias=calcCFFSubroutineBias(i._subrs)}i._privateDict=p}n.push(i)}return n}function parseCFFCharset(e,t,r,a){var n,s,o=new parse.Parser(e,t);r-=1;var i=[".notdef"],u=o.parseCard8();if(0===u)for(var l=0;l<r;l+=1)n=o.parseSID(),i.push(getCFFString(a,n));else if(1===u)for(;i.length<=r;){n=o.parseSID(),s=o.parseCard8();for(var p=0;p<=s;p+=1)i.push(getCFFString(a,n)),n+=1}else{if(2!==u)throw new Error("Unknown charset format "+u);for(;i.length<=r;){n=o.parseSID(),s=o.parseCard16();for(var c=0;c<=s;c+=1)i.push(getCFFString(a,n)),n+=1}}return i}function parseCFFEncoding(e,t,r){var a,n={},s=new parse.Parser(e,t),o=s.parseCard8();if(0===o)for(var i=s.parseCard8(),u=0;u<i;u+=1)a=s.parseCard8(),n[a]=u;else{if(1!==o)throw new Error("Unknown encoding format "+o);var l=s.parseCard8();a=1;for(var p=0;p<l;p+=1)for(var c=s.parseCard8(),h=s.parseCard8(),f=c;f<=c+h;f+=1)n[f]=a,a+=1}return new CffEncoding(n,r)}function parseCFFCharstring(e,t,r){function a(e,t){y&&d.closePath(),d.moveTo(e,t),y=!0}function n(){var e;e=g.length%2!=0,e&&!m&&(k=g.shift()+f),v+=g.length>>1,g.length=0,m=!0}function s(r){for(var h,T,x,P,U,R,C,O,E,L,D,F,I=0;I<r.length;){var M=r[I];switch(I+=1,M){case 1:case 3:n();break;case 4:g.length>1&&!m&&(k=g.shift()+f,m=!0),S+=g.pop(),a(b,S);break;case 5:for(;g.length>0;)b+=g.shift(),S+=g.shift(),d.lineTo(b,S);break;case 6:for(;g.length>0&&(b+=g.shift(),d.lineTo(b,S),0!==g.length);)S+=g.shift(),d.lineTo(b,S);break;case 7:for(;g.length>0&&(S+=g.shift(),d.lineTo(b,S),0!==g.length);)b+=g.shift(),d.lineTo(b,S);break;case 8:for(;g.length>0;)o=b+g.shift(),i=S+g.shift(),u=o+g.shift(),l=i+g.shift(),b=u+g.shift(),S=l+g.shift(),d.curveTo(o,i,u,l,b,S);break;case 10:U=g.pop()+c,R=p[U],R&&s(R);break;case 11:return;case 12:switch(M=r[I],I+=1,M){case 35:o=b+g.shift(),i=S+g.shift(),u=o+g.shift(),l=i+g.shift(),C=u+g.shift(),O=l+g.shift(),E=C+g.shift(),L=O+g.shift(),D=E+g.shift(),F=L+g.shift(),b=D+g.shift(),S=F+g.shift(),g.shift(),d.curveTo(o,i,u,l,C,O),d.curveTo(E,L,D,F,b,S);break;case 34:o=b+g.shift(),i=S,u=o+g.shift(),l=i+g.shift(),C=u+g.shift(),O=l,E=C+g.shift(),L=l,D=E+g.shift(),F=S,b=D+g.shift(),d.curveTo(o,i,u,l,C,O),d.curveTo(E,L,D,F,b,S);break;case 36:o=b+g.shift(),i=S+g.shift(),u=o+g.shift(),l=i+g.shift(),C=u+g.shift(),O=l,E=C+g.shift(),L=l,D=E+g.shift(),F=L+g.shift(),b=D+g.shift(),d.curveTo(o,i,u,l,C,O),d.curveTo(E,L,D,F,b,S);break;case 37:o=b+g.shift(),i=S+g.shift(),u=o+g.shift(),l=i+g.shift(),C=u+g.shift(),O=l+g.shift(),E=C+g.shift(),L=O+g.shift(),D=E+g.shift(),F=L+g.shift(),Math.abs(D-b)>Math.abs(F-S)?b=D+g.shift():S=F+g.shift(),d.curveTo(o,i,u,l,C,O),d.curveTo(E,L,D,F,b,S);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+M),g.length=0}break;case 14:g.length>0&&!m&&(k=g.shift()+f,m=!0),y&&(d.closePath(),y=!1);break;case 18:n();break;case 19:case 20:n(),I+=v+7>>3;break;case 21:g.length>2&&!m&&(k=g.shift()+f,m=!0),S+=g.pop(),b+=g.pop(),a(b,S);break;case 22:g.length>1&&!m&&(k=g.shift()+f,m=!0),b+=g.pop(),a(b,S);break;case 23:n();break;case 24:for(;g.length>2;)o=b+g.shift(),i=S+g.shift(),u=o+g.shift(),l=i+g.shift(),b=u+g.shift(),S=l+g.shift(),d.curveTo(o,i,u,l,b,S);b+=g.shift(),S+=g.shift(),d.lineTo(b,S);break;case 25:for(;g.length>6;)b+=g.shift(),S+=g.shift(),d.lineTo(b,S);o=b+g.shift(),i=S+g.shift(),u=o+g.shift(),l=i+g.shift(),b=u+g.shift(),S=l+g.shift(),d.curveTo(o,i,u,l,b,S);break;case 26:for(g.length%2&&(b+=g.shift());g.length>0;)o=b,i=S+g.shift(),u=o+g.shift(),l=i+g.shift(),b=u,S=l+g.shift(),d.curveTo(o,i,u,l,b,S);break;case 27:for(g.length%2&&(S+=g.shift());g.length>0;)o=b+g.shift(),i=S,u=o+g.shift(),l=i+g.shift(),b=u+g.shift(),S=l,d.curveTo(o,i,u,l,b,S);break;case 28:h=r[I],T=r[I+1],g.push((h<<24|T<<16)>>16),I+=2;break;case 29:U=g.pop()+e.gsubrsBias,R=e.gsubrs[U],R&&s(R);break;case 30:for(;g.length>0&&(o=b,i=S+g.shift(),u=o+g.shift(),l=i+g.shift(),b=u+g.shift(),S=l+(1===g.length?g.shift():0),d.curveTo(o,i,u,l,b,S),0!==g.length);)o=b+g.shift(),i=S,u=o+g.shift(),l=i+g.shift(),S=l+g.shift(),b=u+(1===g.length?g.shift():0),d.curveTo(o,i,u,l,b,S);break;case 31:for(;g.length>0&&(o=b+g.shift(),i=S,u=o+g.shift(),l=i+g.shift(),S=l+g.shift(),b=u+(1===g.length?g.shift():0),d.curveTo(o,i,u,l,b,S),0!==g.length);)o=b,i=S+g.shift(),u=o+g.shift(),l=i+g.shift(),b=u+g.shift(),S=l+(1===g.length?g.shift():0),d.curveTo(o,i,u,l,b,S);break;default:M<32?console.log("Glyph "+t.index+": unknown operator "+M):M<247?g.push(M-139):M<251?(h=r[I],I+=1,g.push(256*(M-247)+h+108)):M<255?(h=r[I],I+=1,g.push(256*-(M-251)-h-108)):(h=r[I],T=r[I+1],x=r[I+2],P=r[I+3],I+=4,g.push((h<<24|T<<16|x<<8|P)/65536))}}}var o,i,u,l,p,c,h,f,d=new Path,g=[],v=0,m=!1,y=!1,b=0,S=0;if(e.isCIDFont){var T=e.tables.cff.topDict._fdSelect[t.index],x=e.tables.cff.topDict._fdArray[T];p=x._subrs,c=x._subrsBias,h=x._defaultWidthX,f=x._nominalWidthX}else p=e.tables.cff.topDict._subrs,c=e.tables.cff.topDict._subrsBias,h=e.tables.cff.topDict._defaultWidthX,f=e.tables.cff.topDict._nominalWidthX;var k=h;return s(r),t.advanceWidth=k,d}function parseCFFFDSelect(e,t,r,a){var n,s=[],o=new parse.Parser(e,t),i=o.parseCard8();if(0===i)for(var u=0;u<r;u++){if(n=o.parseCard8(),n>=a)throw new Error("CFF table CID Font FDSelect has bad FD index value "+n+" (FD count "+a+")");s.push(n)}else{if(3!==i)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+i);var l,p=o.parseCard16(),c=o.parseCard16();if(0!==c)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+c);for(var h=0;h<p;h++){if(n=o.parseCard8(),l=o.parseCard16(),n>=a)throw new Error("CFF table CID Font FDSelect has bad FD index value "+n+" (FD count "+a+")");if(l>r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+l);for(;c<l;c++)s.push(n);c=l}if(l!==r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+l)}return s}function parseCFFTable(e,t,r,a){r.tables.cff={};var n=parseCFFHeader(e,t),s=parseCFFIndex(e,n.endOffset,parse.bytesToString),o=parseCFFIndex(e,s.endOffset),i=parseCFFIndex(e,o.endOffset,parse.bytesToString),u=parseCFFIndex(e,i.endOffset);r.gsubrs=u.objects,r.gsubrsBias=calcCFFSubroutineBias(r.gsubrs);var l=gatherCFFTopDicts(e,t,o.objects,i.objects);if(1!==l.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+l.length);var p=l[0];if(r.tables.cff.topDict=p,p._privateDict&&(r.defaultWidthX=p._privateDict.defaultWidthX,r.nominalWidthX=p._privateDict.nominalWidthX),void 0!==p.ros[0]&&void 0!==p.ros[1]&&(r.isCIDFont=!0),r.isCIDFont){var c=p.fdArray,h=p.fdSelect;if(0===c||0===h)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");c+=t;var f=parseCFFIndex(e,c),d=gatherCFFTopDicts(e,t,f.objects,i.objects);p._fdArray=d,h+=t,p._fdSelect=parseCFFFDSelect(e,h,r.numGlyphs,d.length)}var g,v=t+p.private[1],m=parseCFFPrivateDict(e,v,p.private[0],i.objects);if(r.defaultWidthX=m.defaultWidthX,r.nominalWidthX=m.nominalWidthX,0!==m.subrs){var y=v+m.subrs,b=parseCFFIndex(e,y);r.subrs=b.objects,r.subrsBias=calcCFFSubroutineBias(r.subrs)}else r.subrs=[],r.subrsBias=0;a.lowMemory?(g=parseCFFIndexLowMemory(e,t+p.charStrings),r.nGlyphs=g.offsets.length):(g=parseCFFIndex(e,t+p.charStrings),r.nGlyphs=g.objects.length);var S=parseCFFCharset(e,t+p.charset,r.nGlyphs,i.objects);if(0===p.encoding?r.cffEncoding=new CffEncoding(cffStandardEncoding,S):1===p.encoding?r.cffEncoding=new CffEncoding(cffExpertEncoding,S):r.cffEncoding=parseCFFEncoding(e,t+p.encoding,S),r.encoding=r.encoding||r.cffEncoding,r.glyphs=new glyphset.GlyphSet(r),a.lowMemory)r._push=function(a){var n=getCffIndexObject(a,g.offsets,e,t+p.charStrings);r.glyphs.push(a,glyphset.cffGlyphLoader(r,a,parseCFFCharstring,n))};else for(var T=0;T<r.nGlyphs;T+=1){var x=g.objects[T];r.glyphs.push(T,glyphset.cffGlyphLoader(r,T,parseCFFCharstring,x))}}function encodeString(e,t){var r,a=cffStandardStrings.indexOf(e);return a>=0&&(r=a),a=t.indexOf(e),a>=0?r=a+cffStandardStrings.length:(r=cffStandardStrings.length+t.length,t.push(e)),r}function makeHeader(){return new table.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function makeNameIndex(e){var t=new table.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var r=0;r<e.length;r+=1)t.names.push({name:"name_"+r,type:"NAME",value:e[r]});return t}function makeDict(e,t,r){for(var a={},n=0;n<e.length;n+=1){var s=e[n],o=t[s.name];void 0===o||equals(o,s.value)||("SID"===s.type&&(o=encodeString(o,r)),a[s.op]={name:s.name,type:s.type,value:o})}return a}function makeTopDict(e,t){var r=new table.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=makeDict(TOP_DICT_META,e,t),r}function makeTopDictIndex(e){var t=new table.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function makeStringIndex(e){var t=new table.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var r=0;r<e.length;r+=1)t.strings.push({name:"string_"+r,type:"STRING",value:e[r]});return t}function makeGlobalSubrIndex(){return new table.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function makeCharsets(e,t){for(var r=new table.Record("Charsets",[{name:"format",type:"Card8",value:0}]),a=0;a<e.length;a+=1){var n=e[a],s=encodeString(n,t);r.fields.push({name:"glyph_"+a,type:"SID",value:s})}return r}function glyphToOps(e){var t=[],r=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var a=0,n=0,s=0;s<r.commands.length;s+=1){var o=void 0,i=void 0,u=r.commands[s];if("Q"===u.type){var l=1/3,p=2/3;u={type:"C",x:u.x,y:u.y,x1:Math.round(l*a+p*u.x1),y1:Math.round(l*n+p*u.y1),x2:Math.round(l*u.x+p*u.x1),y2:Math.round(l*u.y+p*u.y1)}}if("M"===u.type)o=Math.round(u.x-a),i=Math.round(u.y-n),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:i}),t.push({name:"rmoveto",type:"OP",value:21}),a=Math.round(u.x),n=Math.round(u.y);else if("L"===u.type)o=Math.round(u.x-a),i=Math.round(u.y-n),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:i}),t.push({name:"rlineto",type:"OP",value:5}),a=Math.round(u.x),n=Math.round(u.y);else if("C"===u.type){var c=Math.round(u.x1-a),h=Math.round(u.y1-n),f=Math.round(u.x2-u.x1),d=Math.round(u.y2-u.y1);o=Math.round(u.x-u.x2),i=Math.round(u.y-u.y2),t.push({name:"dx1",type:"NUMBER",value:c}),t.push({name:"dy1",type:"NUMBER",value:h}),t.push({name:"dx2",type:"NUMBER",value:f}),t.push({name:"dy2",type:"NUMBER",value:d}),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:i}),t.push({name:"rrcurveto",type:"OP",value:8}),a=Math.round(u.x),n=Math.round(u.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}function makeCharStringsIndex(e){for(var t=new table.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),r=0;r<e.length;r+=1){var a=e.get(r),n=glyphToOps(a);t.charStrings.push({name:a.name,type:"CHARSTRING",value:n})}return t}function makePrivateDict(e,t){var r=new table.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=makeDict(PRIVATE_DICT_META,e,t),r}function makeCFFTable(e,t){for(var r,a=new table.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),n=1/t.unitsPerEm,s={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[n,0,0,n,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},o={},i=[],u=1;u<e.length;u+=1)r=e.get(u),i.push(r.name);var l=[];a.header=makeHeader(),a.nameIndex=makeNameIndex([t.postScriptName]);var p=makeTopDict(s,l);a.topDictIndex=makeTopDictIndex(p),a.globalSubrIndex=makeGlobalSubrIndex(),a.charsets=makeCharsets(i,l),a.charStringsIndex=makeCharStringsIndex(e),a.privateDict=makePrivateDict(o,l),a.stringIndex=makeStringIndex(l);var c=a.header.sizeOf()+a.nameIndex.sizeOf()+a.topDictIndex.sizeOf()+a.stringIndex.sizeOf()+a.globalSubrIndex.sizeOf();return s.charset=c,s.encoding=0,s.charStrings=s.charset+a.charsets.sizeOf(),s.private[1]=s.charStrings+a.charStringsIndex.sizeOf(),p=makeTopDict(s,l),a.topDictIndex=makeTopDictIndex(p),a}function parseHeadTable(e,t){var r={},a=new parse.Parser(e,t);return r.version=a.parseVersion(),r.fontRevision=Math.round(1e3*a.parseFixed())/1e3,r.checkSumAdjustment=a.parseULong(),r.magicNumber=a.parseULong(),check.argument(1594834165===r.magicNumber,"Font header has wrong magic number."),r.flags=a.parseUShort(),r.unitsPerEm=a.parseUShort(),r.created=a.parseLongDateTime(),r.modified=a.parseLongDateTime(),r.xMin=a.parseShort(),r.yMin=a.parseShort(),r.xMax=a.parseShort(),r.yMax=a.parseShort(),r.macStyle=a.parseUShort(),r.lowestRecPPEM=a.parseUShort(),r.fontDirectionHint=a.parseShort(),r.indexToLocFormat=a.parseShort(),r.glyphDataFormat=a.parseShort(),r}function makeHeadTable(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,r=t;return e.createdTimestamp&&(r=e.createdTimestamp+2082844800),new table.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0
},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:r},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}function parseHheaTable(e,t){var r={},a=new parse.Parser(e,t);return r.version=a.parseVersion(),r.ascender=a.parseShort(),r.descender=a.parseShort(),r.lineGap=a.parseShort(),r.advanceWidthMax=a.parseUShort(),r.minLeftSideBearing=a.parseShort(),r.minRightSideBearing=a.parseShort(),r.xMaxExtent=a.parseShort(),r.caretSlopeRise=a.parseShort(),r.caretSlopeRun=a.parseShort(),r.caretOffset=a.parseShort(),a.relativeOffset+=8,r.metricDataFormat=a.parseShort(),r.numberOfHMetrics=a.parseUShort(),r}function makeHheaTable(e){return new table.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}function parseHmtxTableAll(e,t,r,a,n){for(var s,o,i=new parse.Parser(e,t),u=0;u<a;u+=1){u<r&&(s=i.parseUShort(),o=i.parseShort());var l=n.get(u);l.advanceWidth=s,l.leftSideBearing=o}}function parseHmtxTableOnLowMemory(e,t,r,a,n){var s,o;e._hmtxTableData={};for(var i=new parse.Parser(t,r),u=0;u<n;u+=1)u<a&&(s=i.parseUShort(),o=i.parseShort()),e._hmtxTableData[u]={advanceWidth:s,leftSideBearing:o}}function parseHmtxTable(e,t,r,a,n,s,o){o.lowMemory?parseHmtxTableOnLowMemory(e,t,r,a,n):parseHmtxTableAll(t,r,a,n,s)}function makeHmtxTable(e){for(var t=new table.Table("hmtx",[]),r=0;r<e.length;r+=1){var a=e.get(r),n=a.advanceWidth||0,s=a.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:n}),t.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:s})}return t}function makeLtagTable(e){for(var t=new table.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),r="",a=12+4*e.length,n=0;n<e.length;++n){var s=r.indexOf(e[n]);s<0&&(s=r.length,r+=e[n]),t.fields.push({name:"offset "+n,type:"USHORT",value:a+s}),t.fields.push({name:"length "+n,type:"USHORT",value:e[n].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),t}function parseLtagTable(e,t){var r=new parse.Parser(e,t),a=r.parseULong();check.argument(1===a,"Unsupported ltag table version."),r.skip("uLong",1);for(var n=r.parseULong(),s=[],o=0;o<n;o++){for(var i="",u=t+r.parseUShort(),l=r.parseUShort(),p=u;p<u+l;++p)i+=String.fromCharCode(e.getInt8(p));s.push(i)}return s}function parseMaxpTable(e,t){var r={},a=new parse.Parser(e,t);return r.version=a.parseVersion(),r.numGlyphs=a.parseUShort(),1===r.version&&(r.maxPoints=a.parseUShort(),r.maxContours=a.parseUShort(),r.maxCompositePoints=a.parseUShort(),r.maxCompositeContours=a.parseUShort(),r.maxZones=a.parseUShort(),r.maxTwilightPoints=a.parseUShort(),r.maxStorage=a.parseUShort(),r.maxFunctionDefs=a.parseUShort(),r.maxInstructionDefs=a.parseUShort(),r.maxStackElements=a.parseUShort(),r.maxSizeOfInstructions=a.parseUShort(),r.maxComponentElements=a.parseUShort(),r.maxComponentDepth=a.parseUShort()),r}function makeMaxpTable(e){return new table.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}function getLanguageCode(e,t,r){switch(e){case 0:if(65535===t)return"und";if(r)return r[t];break;case 1:return macLanguages[t];case 3:return windowsLanguages[t]}}function getEncoding(e,t,r){switch(e){case 0:return utf16;case 1:return macLanguageEncodings[r]||macScriptEncodings[t];case 3:if(1===t||10===t)return utf16}}function parseNameTable(e,t,r){for(var a={},n=new parse.Parser(e,t),s=n.parseUShort(),o=n.parseUShort(),i=n.offset+n.parseUShort(),u=0;u<o;u++){var l=n.parseUShort(),p=n.parseUShort(),c=n.parseUShort(),h=n.parseUShort(),f=nameTableNames[h]||h,d=n.parseUShort(),g=n.parseUShort(),v=getLanguageCode(l,c,r),m=getEncoding(l,p,c);if(void 0!==m&&void 0!==v){var y=void 0;if(y=m===utf16?decode.UTF16(e,i+g,d):decode.MACSTRING(e,i+g,d,m),y){var b=a[f];void 0===b&&(b=a[f]={}),b[v]=y}}}return 1===s&&n.parseUShort(),a}function reverseDict(e){var t={};for(var r in e)t[e[r]]=parseInt(r);return t}function makeNameRecord(e,t,r,a,n,s){return new table.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:a},{name:"length",type:"USHORT",value:n},{name:"offset",type:"USHORT",value:s}])}function findSubArray(e,t){var r=e.length,a=t.length-r+1;e:for(var n=0;n<a;n++)for(;n<a;n++){for(var s=0;s<r;s++)if(t[n+s]!==e[s])continue e;return n}return-1}function addStringToPool(e,t){var r=findSubArray(e,t);if(r<0){r=t.length;for(var a=0,n=e.length;a<n;++a)t.push(e[a])}return r}function makeNameTable(e,t){var r,a=[],n={},s=reverseDict(nameTableNames);for(var o in e){var i=s[o];if(void 0===i&&(i=o),r=parseInt(i),isNaN(r))throw new Error('Name table entry "'+o+'" does not exist, see nameTableNames for complete list.');n[r]=e[o],a.push(r)}for(var u=reverseDict(macLanguages),l=reverseDict(windowsLanguages),p=[],c=[],h=0;h<a.length;h++){r=a[h];var f=n[r];for(var d in f){var g=f[d],v=1,m=u[d],y=macLanguageToScript[m],b=getEncoding(v,y,m),S=encode.MACSTRING(g,b);void 0===S&&(v=0,m=t.indexOf(d),m<0&&(m=t.length,t.push(d)),y=4,S=encode.UTF16(g));var T=addStringToPool(S,c);p.push(makeNameRecord(v,y,m,r,S.length,T));var x=l[d];if(void 0!==x){var k=encode.UTF16(g),P=addStringToPool(k,c);p.push(makeNameRecord(3,1,x,r,k.length,P))}}}p.sort(function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID});for(var U=new table.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:p.length},{name:"stringOffset",type:"USHORT",value:6+12*p.length}]),R=0;R<p.length;R++)U.fields.push({name:"record_"+R,type:"RECORD",value:p[R]});return U.fields.push({name:"strings",type:"LITERAL",value:c}),U}function getUnicodeRange(e){for(var t=0;t<unicodeRanges.length;t+=1){var r=unicodeRanges[t];if(e>=r.begin&&e<r.end)return t}return-1}function parseOS2Table(e,t){var r={},a=new parse.Parser(e,t);r.version=a.parseUShort(),r.xAvgCharWidth=a.parseShort(),r.usWeightClass=a.parseUShort(),r.usWidthClass=a.parseUShort(),r.fsType=a.parseUShort(),r.ySubscriptXSize=a.parseShort(),r.ySubscriptYSize=a.parseShort(),r.ySubscriptXOffset=a.parseShort(),r.ySubscriptYOffset=a.parseShort(),r.ySuperscriptXSize=a.parseShort(),r.ySuperscriptYSize=a.parseShort(),r.ySuperscriptXOffset=a.parseShort(),r.ySuperscriptYOffset=a.parseShort(),r.yStrikeoutSize=a.parseShort(),r.yStrikeoutPosition=a.parseShort(),r.sFamilyClass=a.parseShort(),r.panose=[];for(var n=0;n<10;n++)r.panose[n]=a.parseByte();return r.ulUnicodeRange1=a.parseULong(),r.ulUnicodeRange2=a.parseULong(),r.ulUnicodeRange3=a.parseULong(),r.ulUnicodeRange4=a.parseULong(),r.achVendID=String.fromCharCode(a.parseByte(),a.parseByte(),a.parseByte(),a.parseByte()),r.fsSelection=a.parseUShort(),r.usFirstCharIndex=a.parseUShort(),r.usLastCharIndex=a.parseUShort(),r.sTypoAscender=a.parseShort(),r.sTypoDescender=a.parseShort(),r.sTypoLineGap=a.parseShort(),r.usWinAscent=a.parseUShort(),r.usWinDescent=a.parseUShort(),r.version>=1&&(r.ulCodePageRange1=a.parseULong(),r.ulCodePageRange2=a.parseULong()),r.version>=2&&(r.sxHeight=a.parseShort(),r.sCapHeight=a.parseShort(),r.usDefaultChar=a.parseUShort(),r.usBreakChar=a.parseUShort(),r.usMaxContent=a.parseUShort()),r}function makeOS2Table(e){return new table.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)}function parsePostTable(e,t){var r={},a=new parse.Parser(e,t);switch(r.version=a.parseVersion(),r.italicAngle=a.parseFixed(),r.underlinePosition=a.parseShort(),r.underlineThickness=a.parseShort(),r.isFixedPitch=a.parseULong(),r.minMemType42=a.parseULong(),r.maxMemType42=a.parseULong(),r.minMemType1=a.parseULong(),r.maxMemType1=a.parseULong(),r.version){case 1:r.names=standardNames.slice();break;case 2:r.numberOfGlyphs=a.parseUShort(),r.glyphNameIndex=new Array(r.numberOfGlyphs);for(var n=0;n<r.numberOfGlyphs;n++)r.glyphNameIndex[n]=a.parseUShort();r.names=[];for(var s=0;s<r.numberOfGlyphs;s++)if(r.glyphNameIndex[s]>=standardNames.length){var o=a.parseChar();r.names.push(a.parseString(o))}break;case 2.5:r.numberOfGlyphs=a.parseUShort(),r.offset=new Array(r.numberOfGlyphs);for(var i=0;i<r.numberOfGlyphs;i++)r.offset[i]=a.parseChar()}return r}function makePostTable(){return new table.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}function parseGsubTable(e,t){t=t||0;var r=new Parser(e,t),a=r.parseVersion(1);return check.argument(1===a||1.1===a,"Unsupported GSUB table version."),1===a?{version:a,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(subtableParsers)}:{version:a,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(subtableParsers),variations:r.parseFeatureVariationsList()}}function makeGsubTable(e){return new table.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new table.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new table.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new table.LookupList(e.lookups,subtableMakers)}])}function parseMetaTable(e,t){var r=new parse.Parser(e,t),a=r.parseULong();check.argument(1===a,"Unsupported META table version."),r.parseULong(),r.parseULong();for(var n=r.parseULong(),s={},o=0;o<n;o++){var i=r.parseTag(),u=r.parseULong(),l=r.parseULong(),p=decode.UTF8(e,t+u,l);s[i]=p}return s}function makeMetaTable(e){var t=Object.keys(e).length,r="",a=16+12*t,n=new table.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:a},{name:"numTags",type:"ULONG",value:t}]);for(var s in e){var o=r.length;r+=e[s],n.fields.push({name:"tag "+s,type:"TAG",value:s}),n.fields.push({name:"offset "+s,type:"ULONG",value:a+o}),n.fields.push({name:"length "+s,type:"ULONG",value:e[s].length})}return n.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),n}function log2(e){return Math.log(e)/Math.log(2)|0}function computeCheckSum(e){for(;e.length%4!=0;)e.push(0);for(var t=0,r=0;r<e.length;r+=4)t+=(e[r]<<24)+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];return t%=Math.pow(2,32),t}function makeTableRecord(e,t,r,a){return new table.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==r?r:0},{name:"length",type:"ULONG",value:void 0!==a?a:0}])}function makeSfntTable(e){var t=new table.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var r=Math.pow(2,log2(t.numTables));t.searchRange=16*r,t.entrySelector=log2(r),t.rangeShift=16*t.numTables-t.searchRange;for(var a=[],n=[],s=t.sizeOf()+makeTableRecord().sizeOf()*t.numTables;s%4!=0;)s+=1,n.push({name:"padding",type:"BYTE",value:0});for(var o=0;o<e.length;o+=1){var i=e[o];check.argument(4===i.tableName.length,"Table name"+i.tableName+" is invalid.");var u=i.sizeOf(),l=makeTableRecord(i.tableName,computeCheckSum(i.encode()),s,u);for(a.push({name:l.tag+" Table Record",type:"RECORD",value:l}),n.push({name:i.tableName+" table",type:"RECORD",value:i}),s+=u,check.argument(!isNaN(s),"Something went wrong calculating the offset.");s%4!=0;)s+=1,n.push({name:"padding",type:"BYTE",value:0})}return a.sort(function(e,t){return e.value.tag>t.value.tag?1:-1}),t.fields=t.fields.concat(a),t.fields=t.fields.concat(n),t}function metricsForChar(e,t,r){for(var a=0;a<t.length;a+=1){var n=e.charToGlyphIndex(t[a]);if(n>0){var s=e.glyphs.get(n);return s.getMetrics()}}return r}function average(e){for(var t=0,r=0;r<e.length;r+=1)t+=e[r];return t/e.length}function fontToSfntTable(e){for(var t,r=[],a=[],n=[],s=[],o=[],i=[],u=[],l=0,p=0,c=0,h=0,f=0,d=0;d<e.glyphs.length;d+=1){var g=e.glyphs.get(d),v=0|g.unicode;if(isNaN(g.advanceWidth))throw new Error("Glyph "+g.name+" ("+d+"): advanceWidth is not a number.");(t>v||void 0===t)&&v>0&&(t=v),l<v&&(l=v);var m=os2.getUnicodeRange(v);if(m<32)p|=1<<m;else if(m<64)c|=1<<m-32;else if(m<96)h|=1<<m-64;else{if(!(m<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");f|=1<<m-96}if(".notdef"!==g.name){var y=g.getMetrics();r.push(y.xMin),a.push(y.yMin),n.push(y.xMax),s.push(y.yMax),i.push(y.leftSideBearing),u.push(y.rightSideBearing),o.push(g.advanceWidth)}}var b={xMin:Math.min.apply(null,r),yMin:Math.min.apply(null,a),xMax:Math.max.apply(null,n),yMax:Math.max.apply(null,s),advanceWidthMax:Math.max.apply(null,o),advanceWidthAvg:average(o),minLeftSideBearing:Math.min.apply(null,i),maxLeftSideBearing:Math.max.apply(null,i),minRightSideBearing:Math.min.apply(null,u)};b.ascender=e.ascender,b.descender=e.descender;var S=head.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:b.xMin,yMin:b.yMin,xMax:b.xMax,yMax:b.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),T=hhea.make({ascender:b.ascender,descender:b.descender,advanceWidthMax:b.advanceWidthMax,minLeftSideBearing:b.minLeftSideBearing,minRightSideBearing:b.minRightSideBearing,xMaxExtent:b.maxLeftSideBearing+(b.xMax-b.xMin),numberOfHMetrics:e.glyphs.length}),x=maxp.make(e.glyphs.length),k=os2.make(Object.assign({xAvgCharWidth:Math.round(b.advanceWidthAvg),usFirstCharIndex:t,usLastCharIndex:l,ulUnicodeRange1:p,ulUnicodeRange2:c,ulUnicodeRange3:h,ulUnicodeRange4:f,sTypoAscender:b.ascender,sTypoDescender:b.descender,sTypoLineGap:0,usWinAscent:b.yMax,usWinDescent:Math.abs(b.yMin),ulCodePageRange1:1,sxHeight:metricsForChar(e,"xyvw",{yMax:Math.round(b.ascender/2)}).yMax,sCapHeight:metricsForChar(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",b).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0},e.tables.os2)),P=hmtx.make(e.glyphs),U=cmap.make(e.glyphs),R=e.getEnglishName("fontFamily"),C=e.getEnglishName("fontSubfamily"),O=R+" "+C,E=e.getEnglishName("postScriptName");E||(E=R.replace(/\s/g,"")+"-"+C);var L={};for(var D in e.names)L[D]=e.names[D];L.uniqueID||(L.uniqueID={en:e.getEnglishName("manufacturer")+":"+O}),L.postScriptName||(L.postScriptName={en:E}),L.preferredFamily||(L.preferredFamily=e.names.fontFamily),L.preferredSubfamily||(L.preferredSubfamily=e.names.fontSubfamily);var F=[],I=_name.make(L,F),M=F.length>0?ltag.make(F):void 0,w=post.make(),G=cff.make(e.glyphs,{version:e.getEnglishName("version"),fullName:O,familyName:R,weightName:C,postScriptName:E,unitsPerEm:e.unitsPerEm,fontBBox:[0,b.yMin,b.ascender,b.advanceWidthMax]}),A=e.metas&&Object.keys(e.metas).length>0?meta.make(e.metas):void 0,B=[S,T,x,k,I,U,w,G,P];M&&B.push(M),e.tables.gsub&&B.push(gsub.make(e.tables.gsub)),A&&B.push(A);for(var N=makeSfntTable(B),_=N.encode(),H=computeCheckSum(_),z=N.fields,W=!1,V=0;V<z.length;V+=1)if("head table"===z[V].name){z[V].value.checkSumAdjustment=2981146554-H,W=!0;break}if(!W)throw new Error("Could not find head table with checkSum to adjust.");return N}function searchTag(e,t){for(var r=0,a=e.length-1;r<=a;){var n=r+a>>>1,s=e[n].tag;if(s===t)return n;s<t?r=n+1:a=n-1}return-r-1}function binSearch(e,t){for(var r=0,a=e.length-1;r<=a;){var n=r+a>>>1,s=e[n];if(s===t)return n;s<t?r=n+1:a=n-1}return-r-1}function searchRange(e,t){for(var r,a=0,n=e.length-1;a<=n;){var s=a+n>>>1;r=e[s];var o=r.start;if(o===t)return r;o<t?a=s+1:n=s-1}if(a>0)return r=e[a-1],t>r.end?0:r}function Layout(e,t){this.font=e,this.tableName=t}function Position(e){Layout.call(this,e,"gpos")}function Substitution(e){Layout.call(this,e,"gsub")}function arraysEqual(e,t){var r=e.length;if(r!==t.length)return!1;for(var a=0;a<r;a++)if(e[a]!==t[a])return!1;return!0}function getSubstFormat(e,t,r){for(var a=e.subtables,n=0;n<a.length;n++){var s=a[n];if(s.substFormat===t)return s}if(r)return a.push(r),r}function isBrowser(){return"undefined"!=typeof window}function nodeBufferToArrayBuffer(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a<e.length;++a)r[a]=e[a];return t}function arrayBufferToNodeBuffer(e){for(var t=new Buffer(e.byteLength),r=new Uint8Array(e),a=0;a<t.length;++a)t[a]=r[a];return t}function checkArgument(e,t){if(!e)throw t}function parseGlyphCoordinate(e,t,r,a,n){var s;return(t&a)>0?(s=e.parseByte(),0==(t&n)&&(s=-s),s=r+s):s=(t&n)>0?r:r+e.parseShort(),s}function parseGlyph(e,t,r){var a,n,s=new parse.Parser(t,r);if(e.numberOfContours=s.parseShort(),e._xMin=s.parseShort(),e._yMin=s.parseShort(),e._xMax=s.parseShort(),e._yMax=s.parseShort(),e.numberOfContours>0){for(var o=e.endPointIndices=[],i=0;i<e.numberOfContours;i+=1)o.push(s.parseUShort());e.instructionLength=s.parseUShort(),e.instructions=[];for(var u=0;u<e.instructionLength;u+=1)e.instructions.push(s.parseByte());var l=o[o.length-1]+1;a=[];for(var p=0;p<l;p+=1)if(n=s.parseByte(),a.push(n),(8&n)>0)for(var c=s.parseByte(),h=0;h<c;h+=1)a.push(n),p+=1;if(check.argument(a.length===l,"Bad flags."),o.length>0){var f,d=[];if(l>0){for(var g=0;g<l;g+=1)n=a[g],f={},f.onCurve=!!(1&n),f.lastPointOfContour=o.indexOf(g)>=0,d.push(f);for(var v=0,m=0;m<l;m+=1)n=a[m],f=d[m],f.x=parseGlyphCoordinate(s,n,v,2,16),v=f.x;for(var y=0,b=0;b<l;b+=1)n=a[b],f=d[b],f.y=parseGlyphCoordinate(s,n,y,4,32),y=f.y}e.points=d}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var S=!0;S;){a=s.parseUShort();var T={glyphIndex:s.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&a)>0?(2&a)>0?(T.dx=s.parseShort(),T.dy=s.parseShort()):T.matchedPoints=[s.parseUShort(),s.parseUShort()]:(2&a)>0?(T.dx=s.parseChar(),T.dy=s.parseChar()):T.matchedPoints=[s.parseByte(),s.parseByte()],(8&a)>0?T.xScale=T.yScale=s.parseF2Dot14():(64&a)>0?(T.xScale=s.parseF2Dot14(),T.yScale=s.parseF2Dot14()):(128&a)>0&&(T.xScale=s.parseF2Dot14(),T.scale01=s.parseF2Dot14(),T.scale10=s.parseF2Dot14(),T.yScale=s.parseF2Dot14()),e.components.push(T),S=!!(32&a)}if(256&a){e.instructionLength=s.parseUShort(),e.instructions=[];for(var x=0;x<e.instructionLength;x+=1)e.instructions.push(s.parseByte())}}}function transformPoints(e,t){for(var r=[],a=0;a<e.length;a+=1){var n=e[a],s={x:t.xScale*n.x+t.scale01*n.y+t.dx,y:t.scale10*n.x+t.yScale*n.y+t.dy,onCurve:n.onCurve,lastPointOfContour:n.lastPointOfContour};r.push(s)}return r}function getContours(e){for(var t=[],r=[],a=0;a<e.length;a+=1){var n=e[a];r.push(n),n.lastPointOfContour&&(t.push(r),r=[])}return check.argument(0===r.length,"There are still points left in the current contour."),t}function getPath(e){var t=new Path;if(!e)return t;for(var r=getContours(e),a=0;a<r.length;++a){var n=r[a],s=null,o=n[n.length-1],i=n[0];if(o.onCurve)t.moveTo(o.x,o.y);else if(i.onCurve)t.moveTo(i.x,i.y);else{var u={x:.5*(o.x+i.x),y:.5*(o.y+i.y)};t.moveTo(u.x,u.y)}for(var l=0;l<n.length;++l)if(s=o,o=i,i=n[(l+1)%n.length],o.onCurve)t.lineTo(o.x,o.y);else{var p=i;s.onCurve||{x:.5*(o.x+s.x),y:.5*(o.y+s.y)},i.onCurve||(p={x:.5*(o.x+i.x),y:.5*(o.y+i.y)}),t.quadraticCurveTo(o.x,o.y,p.x,p.y)}t.closePath()}return t}function buildPath(e,t){if(t.isComposite)for(var r=0;r<t.components.length;r+=1){var a=t.components[r],n=e.get(a.glyphIndex);if(n.getPath(),n.points){var s=void 0;if(void 0===a.matchedPoints)s=transformPoints(n.points,a);else{if(a.matchedPoints[0]>t.points.length-1||a.matchedPoints[1]>n.points.length-1)throw Error("Matched points out of range in "+t.name);var o=t.points[a.matchedPoints[0]],i=n.points[a.matchedPoints[1]],u={xScale:a.xScale,scale01:a.scale01,scale10:a.scale10,yScale:a.yScale,dx:0,dy:0};i=transformPoints([i],u)[0],u.dx=o.x-i.x,u.dy=o.y-i.y,s=transformPoints(n.points,u)}t.points=t.points.concat(s)}}return getPath(t.points)}function parseGlyfTableAll(e,t,r,a){for(var n=new glyphset.GlyphSet(a),s=0;s<r.length-1;s+=1){var o=r[s],i=r[s+1];o!==i?n.push(s,glyphset.ttfGlyphLoader(a,s,parseGlyph,e,t+o,buildPath)):n.push(s,glyphset.glyphLoader(a,s))}return n}function parseGlyfTableOnLowMemory(e,t,r,a){var n=new glyphset.GlyphSet(a);return a._push=function(s){var o=r[s],i=r[s+1];o!==i?n.push(s,glyphset.ttfGlyphLoader(a,s,parseGlyph,e,t+o,buildPath)):n.push(s,glyphset.glyphLoader(a,s))},n}function parseGlyfTable(e,t,r,a,n){return n.lowMemory?parseGlyfTableOnLowMemory(e,t,r,a):parseGlyfTableAll(e,t,r,a)}function Hinting(e){this.font=e,this.getCommands=function(e){return glyf.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function roundOff(e){return e}function roundToGrid(e){return Math.sign(e)*Math.round(Math.abs(e))}function roundToDoubleGrid(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function roundToHalfGrid(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function roundUpToGrid(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function roundDownToGrid(e){return Math.sign(e)*Math.floor(Math.abs(e))}function UnitVector(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}function getUnitVector(e,t){var r=Math.sqrt(e*e+t*t);return e/=r,t/=r,1===e&&0===t?xUnitVector:0===e&&1===t?yUnitVector:new UnitVector(e,t)}function HPoint(e,t,r,a){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=r,this.onCurve=a,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}function State(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=xUnitVector,this.round=roundToGrid}}function initTZone(e){for(var t=e.tZone=new Array(e.gZone.length),r=0;r<t.length;r++)t[r]=new HPoint(0,0)}function skip(e,t){var r,a=e.prog,n=e.ip,s=1;do{if(r=a[++n],88===r)s++;else if(89===r)s--;else if(64===r)n+=a[n+1]+1;else if(65===r)n+=2*a[n+1]+1;else if(r>=176&&r<=183)n+=r-176+1;else if(r>=184&&r<=191)n+=2*(r-184+1);else if(t&&1===s&&27===r)break}while(s>0);e.ip=n}function SVTCA(e,t){exports.DEBUG&&console.log(t.step,"SVTCA["+e.axis+"]"),t.fv=t.pv=t.dpv=e}function SPVTCA(e,t){exports.DEBUG&&console.log(t.step,"SPVTCA["+e.axis+"]"),t.pv=t.dpv=e}function SFVTCA(e,t){exports.DEBUG&&console.log(t.step,"SFVTCA["+e.axis+"]"),t.fv=e}function SPVTL(e,t){var r,a,n=t.stack,s=n.pop(),o=n.pop(),i=t.z2[s],u=t.z1[o];exports.DEBUG&&console.log("SPVTL["+e+"]",s,o),e?(r=i.y-u.y,a=u.x-i.x):(r=u.x-i.x,a=u.y-i.y),t.pv=t.dpv=getUnitVector(r,a)}function SFVTL(e,t){var r,a,n=t.stack,s=n.pop(),o=n.pop(),i=t.z2[s],u=t.z1[o];exports.DEBUG&&console.log("SFVTL["+e+"]",s,o),e?(r=i.y-u.y,a=u.x-i.x):(r=u.x-i.x,a=u.y-i.y),t.fv=getUnitVector(r,a)}function SPVFS(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",r,a),e.pv=e.dpv=getUnitVector(a,r)}function SFVFS(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",r,a),e.fv=getUnitVector(a,r)}function GPV(e){var t=e.stack,r=e.pv;exports.DEBUG&&console.log(e.step,"GPV[]"),t.push(16384*r.x),t.push(16384*r.y)}function GFV(e){var t=e.stack,r=e.fv;exports.DEBUG&&console.log(e.step,"GFV[]"),t.push(16384*r.x),t.push(16384*r.y)}function SFVTPV(e){e.fv=e.pv,exports.DEBUG&&console.log(e.step,"SFVTPV[]")}function ISECT(e){var t=e.stack,r=t.pop(),a=t.pop(),n=t.pop(),s=t.pop(),o=t.pop(),i=e.z0,u=e.z1,l=i[r],p=i[a],c=u[n],h=u[s],f=e.z2[o];exports.DEBUG&&console.log("ISECT[], ",r,a,n,s,o);var d=l.x,g=l.y,v=p.x,m=p.y,y=c.x,b=c.y,S=h.x,T=h.y,x=(d-v)*(b-T)-(g-m)*(y-S),k=d*m-g*v,P=y*T-b*S;f.x=(k*(y-S)-P*(d-v))/x,f.y=(k*(b-T)-P*(g-m))/x}function SRP0(e){e.rp0=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)}function SRP1(e){e.rp1=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)}function SRP2(e){e.rp2=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)}function SZP0(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP0[]",t),e.zp0=t,t){case 0:e.tZone||initTZone(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function SZP1(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP1[]",t),e.zp1=t,t){case 0:e.tZone||initTZone(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function SZP2(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP2[]",t),e.zp2=t,t){case 0:e.tZone||initTZone(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function SZPS(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZPS[]",t),e.zp0=e.zp1=e.zp2=t,t){case 0:e.tZone||initTZone(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function SLOOP(e){e.loop=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)}function RTG(e){exports.DEBUG&&console.log(e.step,"RTG[]"),e.round=roundToGrid}function RTHG(e){exports.DEBUG&&console.log(e.step,"RTHG[]"),e.round=roundToHalfGrid}function SMD(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SMD[]",t),e.minDis=t/64}function ELSE(e){exports.DEBUG&&console.log(e.step,"ELSE[]"),skip(e,!1)}function JMPR(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"JMPR[]",t),e.ip+=t-1}function SCVTCI(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCVTCI[]",t),e.cvCutIn=t/64}function DUP(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DUP[]"),t.push(t[t.length-1])}function POP(e){exports.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function CLEAR(e){exports.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0}function SWAP(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"SWAP[]"),t.push(r),t.push(a)}function DEPTH(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DEPTH[]"),t.push(t.length)}function LOOPCALL(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"LOOPCALL[]",r,a);var n=e.ip,s=e.prog;e.prog=e.funcs[r];for(var o=0;o<a;o++)exec(e),exports.DEBUG&&console.log(++e.step,o+1<a?"next loopcall":"done loopcall",o);e.ip=n,e.prog=s}function CALL(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"CALL[]",t);var r=e.ip,a=e.prog;e.prog=e.funcs[t],exec(e),e.ip=r,e.prog=a,exports.DEBUG&&console.log(++e.step,"returning from",t)}function CINDEX(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"CINDEX[]",r),t.push(t[t.length-r])}function MINDEX(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"MINDEX[]",r),t.push(t.splice(t.length-r,1)[0])}function FDEF(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var t=e.stack,r=e.prog,a=e.ip,n=t.pop(),s=a;for(exports.DEBUG&&console.log(e.step,"FDEF[]",n);45!==r[++a];);e.ip=a,e.funcs[n]=r.slice(s+1,a)}function MDAP(e,t){var r=t.stack.pop(),a=t.z0[r],n=t.fv,s=t.pv;exports.DEBUG&&console.log(t.step,"MDAP["+e+"]",r);var o=s.distance(a,HPZero);e&&(o=t.round(o)),n.setRelative(a,HPZero,o,s),n.touch(a),t.rp0=t.rp1=r}function IUP(e,t){var r,a,n,s=t.z2,o=s.length-2;exports.DEBUG&&console.log(t.step,"IUP["+e.axis+"]");for(var i=0;i<o;i++)r=s[i],e.touched(r)||(a=r.prevTouched(e),a!==r&&(n=r.nextTouched(e),a===n&&e.setRelative(r,r,e.distance(a,a,!1,!0),e,!0),e.interpolate(r,a,n,e)))}function SHP(e,t){for(var r=t.stack,a=e?t.rp1:t.rp2,n=(e?t.z0:t.z1)[a],s=t.fv,o=t.pv,i=t.loop,u=t.z2;i--;){var l=r.pop(),p=u[l],c=o.distance(n,n,!1,!0);s.setRelative(p,p,c,o),s.touch(p),exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-i)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",l)}t.loop=1}function SHC(e,t){var r=t.stack,a=e?t.rp1:t.rp2,n=(e?t.z0:t.z1)[a],s=t.fv,o=t.pv,i=r.pop(),u=t.z2[t.contours[i]],l=u;exports.DEBUG&&console.log(t.step,"SHC["+e+"]",i);var p=o.distance(n,n,!1,!0);do{l!==n&&s.setRelative(l,l,p,o),l=l.nextPointOnContour}while(l!==u)}function SHZ(e,t){var r,a,n=t.stack,s=e?t.rp1:t.rp2,o=(e?t.z0:t.z1)[s],i=t.fv,u=t.pv,l=n.pop();switch(exports.DEBUG&&console.log(t.step,"SHZ["+e+"]",l),l){case 0:r=t.tZone;break;case 1:r=t.gZone;break;default:throw new Error("Invalid zone")}for(var p=u.distance(o,o,!1,!0),c=r.length-2,h=0;h<c;h++)a=r[h],i.setRelative(a,a,p,u)}function SHPIX(e){for(var t=e.stack,r=e.loop,a=e.fv,n=t.pop()/64,s=e.z2;r--;){var o=t.pop(),i=s[o];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-r)+": ":"")+"SHPIX[]",o,n),a.setRelative(i,i,n),a.touch(i)}e.loop=1}function IP(e){for(var t=e.stack,r=e.rp1,a=e.rp2,n=e.loop,s=e.z0[r],o=e.z1[a],i=e.fv,u=e.dpv,l=e.z2;n--;){var p=t.pop(),c=l[p];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-n)+": ":"")+"IP[]",p,r,"<->",a),i.interpolate(c,s,o,u),i.touch(c)}e.loop=1}function MSIRP(e,t){var r=t.stack,a=r.pop()/64,n=r.pop(),s=t.z1[n],o=t.z0[t.rp0],i=t.fv,u=t.pv;i.setRelative(s,o,a,u),i.touch(s),exports.DEBUG&&console.log(t.step,"MSIRP["+e+"]",a,n),t.rp1=t.rp0,t.rp2=n,e&&(t.rp0=n)}function ALIGNRP(e){
for(var t=e.stack,r=e.rp0,a=e.z0[r],n=e.loop,s=e.fv,o=e.pv,i=e.z1;n--;){var u=t.pop(),l=i[u];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-n)+": ":"")+"ALIGNRP[]",u),s.setRelative(l,a,0,o),s.touch(l)}e.loop=1}function RTDG(e){exports.DEBUG&&console.log(e.step,"RTDG[]"),e.round=roundToDoubleGrid}function MIAP(e,t){var r=t.stack,a=r.pop(),n=r.pop(),s=t.z0[n],o=t.fv,i=t.pv,u=t.cvt[a];exports.DEBUG&&console.log(t.step,"MIAP["+e+"]",a,"(",u,")",n);var l=i.distance(s,HPZero);e&&(Math.abs(l-u)<t.cvCutIn&&(l=u),l=t.round(l)),o.setRelative(s,HPZero,l,i),0===t.zp0&&(s.xo=s.x,s.yo=s.y),o.touch(s),t.rp0=t.rp1=n}function NPUSHB(e){var t=e.prog,r=e.ip,a=e.stack,n=t[++r];exports.DEBUG&&console.log(e.step,"NPUSHB[]",n);for(var s=0;s<n;s++)a.push(t[++r]);e.ip=r}function NPUSHW(e){var t=e.ip,r=e.prog,a=e.stack,n=r[++t];exports.DEBUG&&console.log(e.step,"NPUSHW[]",n);for(var s=0;s<n;s++){var o=r[++t]<<8|r[++t];32768&o&&(o=-(1+(65535^o))),a.push(o)}e.ip=t}function WS(e){var t=e.stack,r=e.store;r||(r=e.store=[]);var a=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"WS",a,n),r[n]=a}function RS(e){var t=e.stack,r=e.store,a=t.pop();exports.DEBUG&&console.log(e.step,"RS",a);var n=r&&r[a]||0;t.push(n)}function WCVTP(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"WCVTP",r,a),e.cvt[a]=r/64}function RCVT(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"RCVT",r),t.push(64*e.cvt[r])}function GC(e,t){var r=t.stack,a=r.pop(),n=t.z2[a];exports.DEBUG&&console.log(t.step,"GC["+e+"]",a),r.push(64*t.dpv.distance(n,HPZero,e,!1))}function MD(e,t){var r=t.stack,a=r.pop(),n=r.pop(),s=t.z1[a],o=t.z0[n],i=t.dpv.distance(o,s,e,e);exports.DEBUG&&console.log(t.step,"MD["+e+"]",a,n,"->",i),t.stack.push(Math.round(64*i))}function MPPEM(e){exports.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)}function FLIPON(e){exports.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0}function LT(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"LT[]",r,a),t.push(a<r?1:0)}function LTEQ(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"LTEQ[]",r,a),t.push(a<=r?1:0)}function GT(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"GT[]",r,a),t.push(a>r?1:0)}function GTEQ(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"GTEQ[]",r,a),t.push(a>=r?1:0)}function EQ(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"EQ[]",r,a),t.push(r===a?1:0)}function NEQ(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"NEQ[]",r,a),t.push(r!==a?1:0)}function ODD(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"ODD[]",r),t.push(Math.trunc(r)%2?1:0)}function EVEN(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"EVEN[]",r),t.push(Math.trunc(r)%2?0:1)}function IF(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"IF[]",t),t||(skip(e,!0),exports.DEBUG&&console.log(e.step,"EIF[]"))}function EIF(e){exports.DEBUG&&console.log(e.step,"EIF[]")}function AND(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"AND[]",r,a),t.push(r&&a?1:0)}function OR(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"OR[]",r,a),t.push(r||a?1:0)}function NOT(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"NOT[]",r),t.push(r?0:1)}function DELTAP123(e,t){var r=t.stack,a=r.pop(),n=t.fv,s=t.pv,o=t.ppem,i=t.deltaBase+16*(e-1),u=t.deltaShift,l=t.z0;exports.DEBUG&&console.log(t.step,"DELTAP["+e+"]",a,r);for(var p=0;p<a;p++){var c=r.pop(),h=r.pop(),f=i+((240&h)>>4);if(f===o){var d=(15&h)-8;d>=0&&d++,exports.DEBUG&&console.log(t.step,"DELTAPFIX",c,"by",d*u);var g=l[c];n.setRelative(g,g,d*u,s)}}}function SDB(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"SDB[]",r),e.deltaBase=r}function SDS(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"SDS[]",r),e.deltaShift=Math.pow(.5,r)}function ADD(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"ADD[]",r,a),t.push(a+r)}function SUB(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"SUB[]",r,a),t.push(a-r)}function DIV(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"DIV[]",r,a),t.push(64*a/r)}function MUL(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"MUL[]",r,a),t.push(a*r/64)}function ABS(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"ABS[]",r),t.push(Math.abs(r))}function NEG(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"NEG[]",r),t.push(-r)}function FLOOR(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"FLOOR[]",r),t.push(64*Math.floor(r/64))}function CEILING(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"CEILING[]",r),t.push(64*Math.ceil(r/64))}function ROUND(e,t){var r=t.stack,a=r.pop();exports.DEBUG&&console.log(t.step,"ROUND[]"),r.push(64*t.round(a/64))}function WCVTF(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"WCVTF[]",r,a),e.cvt[a]=r*e.ppem/e.font.unitsPerEm}function DELTAC123(e,t){var r=t.stack,a=r.pop(),n=t.ppem,s=t.deltaBase+16*(e-1),o=t.deltaShift;exports.DEBUG&&console.log(t.step,"DELTAC["+e+"]",a,r);for(var i=0;i<a;i++){var u=r.pop(),l=r.pop(),p=s+((240&l)>>4);if(p===n){var c=(15&l)-8;c>=0&&c++;var h=c*o;exports.DEBUG&&console.log(t.step,"DELTACFIX",u,"by",h),t.cvt[u]+=h}}}function SROUND(e){var t,r=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SROUND[]",r),e.round=roundSuper,192&r){case 0:t=.5;break;case 64:t=1;break;case 128:t=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=t,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid SROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*t}function S45ROUND(e){var t,r=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"S45ROUND[]",r),e.round=roundSuper,192&r){case 0:t=Math.sqrt(2)/2;break;case 64:t=Math.sqrt(2);break;case 128:t=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=t,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid S45ROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*t}function ROFF(e){exports.DEBUG&&console.log(e.step,"ROFF[]"),e.round=roundOff}function RUTG(e){exports.DEBUG&&console.log(e.step,"RUTG[]"),e.round=roundUpToGrid}function RDTG(e){exports.DEBUG&&console.log(e.step,"RDTG[]"),e.round=roundDownToGrid}function SCANCTRL(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANCTRL[]",t)}function SDPVTL(e,t){var r,a,n=t.stack,s=n.pop(),o=n.pop(),i=t.z2[s],u=t.z1[o];exports.DEBUG&&console.log(t.step,"SDPVTL["+e+"]",s,o),e?(r=i.y-u.y,a=u.x-i.x):(r=u.x-i.x,a=u.y-i.y),t.dpv=getUnitVector(r,a)}function GETINFO(e){var t=e.stack,r=t.pop(),a=0;exports.DEBUG&&console.log(e.step,"GETINFO[]",r),1&r&&(a=35),32&r&&(a|=4096),t.push(a)}function ROLL(e){var t=e.stack,r=t.pop(),a=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"ROLL[]"),t.push(a),t.push(r),t.push(n)}function MAX(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"MAX[]",r,a),t.push(Math.max(a,r))}function MIN(e){var t=e.stack,r=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"MIN[]",r,a),t.push(Math.min(a,r))}function SCANTYPE(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANTYPE[]",t)}function INSTCTRL(e){var t=e.stack.pop(),r=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"INSTCTRL[]",t,r),t){case 1:return void(e.inhibitGridFit=!!r);case 2:return void(e.ignoreCvt=!!r);default:throw new Error("invalid INSTCTRL[] selector")}}function PUSHB(e,t){var r=t.stack,a=t.prog,n=t.ip;exports.DEBUG&&console.log(t.step,"PUSHB["+e+"]");for(var s=0;s<e;s++)r.push(a[++n]);t.ip=n}function PUSHW(e,t){var r=t.ip,a=t.prog,n=t.stack;exports.DEBUG&&console.log(t.ip,"PUSHW["+e+"]");for(var s=0;s<e;s++){var o=a[++r]<<8|a[++r];32768&o&&(o=-(1+(65535^o))),n.push(o)}t.ip=r}function MDRP_MIRP(e,t,r,a,n,s){var o,i,u,l,p=s.stack,c=e&&p.pop(),h=p.pop(),f=s.rp0,d=s.z0[f],g=s.z1[h],v=s.minDis,m=s.fv,y=s.dpv;i=o=y.distance(g,d,!0,!0),u=i>=0?1:-1,i=Math.abs(i),e&&(l=s.cvt[c],a&&Math.abs(i-l)<s.cvCutIn&&(i=l)),r&&i<v&&(i=v),a&&(i=s.round(i)),m.setRelative(g,d,u*i,y),m.touch(g),exports.DEBUG&&console.log(s.step,(e?"MIRP[":"MDRP[")+(t?"M":"m")+(r?">":"_")+(a?"R":"_")+(0===n?"Gr":1===n?"Bl":2===n?"Wh":"")+"]",e?c+"("+s.cvt[c]+","+l+")":"",h,"(d =",o,"->",u*i,")"),s.rp1=s.rp0,s.rp2=h,t&&(s.rp0=h)}function Token(e){this.char=e,this.state={},this.activeState=null}function ContextRange(e,t,r){this.contextName=r,this.startIndex=e,this.endOffset=t}function ContextChecker(e,t,r){this.contextName=e,this.openRange=null,this.ranges=[],this.checkStart=t,this.checkEnd=r}function ContextParams(e,t){this.context=e,this.index=t,this.length=e.length,this.current=e[t],this.backtrack=e.slice(0,t),this.lookahead=e.slice(t+1)}function Event(e){this.eventId=e,this.subscribers=[]}function initializeCoreEvents(e){var t=this,r=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];r.forEach(function(e){Object.defineProperty(t.events,e,{value:new Event(e)})}),e&&r.forEach(function(r){var a=e[r];"function"==typeof a&&t.events[r].subscribe(a)});var a=["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"];a.forEach(function(e){t.events[e].subscribe(t.updateContextsRanges)})}function Tokenizer(e){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],initializeCoreEvents.call(this,e)}function isArabicChar(e){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(e)}function isIsolatedArabicChar(e){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(e)}function isTashkeelArabicChar(e){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(e)}function isLatinChar(e){return/[A-z]/.test(e)}function isWhiteSpace(e){return/\s/.test(e)}function FeatureQuery(e){this.font=e,this.features={}}function SubstitutionAction(e){this.id=e.id,this.tag=e.tag,this.substitution=e.substitution}function lookupCoverage(e,t){if(!e)return-1;switch(t.format){case 1:return t.glyphs.indexOf(e);case 2:for(var r=t.ranges,a=0;a<r.length;a++){var n=r[a];if(e>=n.start&&e<=n.end){var s=e-n.start;return n.index+s}}break;default:return-1}return-1}function singleSubstitutionFormat1(e,t){var r=lookupCoverage(e,t.coverage);return-1===r?null:e+t.deltaGlyphId}function singleSubstitutionFormat2(e,t){var r=lookupCoverage(e,t.coverage);return-1===r?null:t.substitute[r]}function lookupCoverageList(e,t){for(var r=[],a=0;a<e.length;a++){var n=e[a],s=t.current;s=Array.isArray(s)?s[0]:s;var o=lookupCoverage(s,n);-1!==o&&r.push(o)}return r.length!==e.length?-1:r}function chainingSubstitutionFormat3(e,t){var r=t.inputCoverage.length+t.lookaheadCoverage.length+t.backtrackCoverage.length;if(e.context.length<r)return[];var a=lookupCoverageList(t.inputCoverage,e);if(-1===a)return[];var n=t.inputCoverage.length-1;if(e.lookahead.length<t.lookaheadCoverage.length)return[];for(var s=e.lookahead.slice(n);s.length&&isTashkeelArabicChar(s[0].char);)s.shift();var o=new ContextParams(s,0),i=lookupCoverageList(t.lookaheadCoverage,o),u=[].concat(e.backtrack);for(u.reverse();u.length&&isTashkeelArabicChar(u[0].char);)u.shift();if(u.length<t.backtrackCoverage.length)return[];var l=new ContextParams(u,0),p=lookupCoverageList(t.backtrackCoverage,l),c=a.length===t.inputCoverage.length&&i.length===t.lookaheadCoverage.length&&p.length===t.backtrackCoverage.length,h=[];if(c)for(var f=0;f<t.lookupRecords.length;f++)for(var d=t.lookupRecords[f],g=d.lookupListIndex,v=this.getLookupByIndex(g),m=0;m<v.subtables.length;m++){var y=v.subtables[m],b=this.getLookupMethod(v,y),S=this.getSubstitutionType(v,y);if("12"===S)for(var T=0;T<a.length;T++){var x=e.get(T),k=b(x);k&&h.push(k)}}return h}function ligatureSubstitutionFormat1(e,t){var r,a=e.current,n=lookupCoverage(a,t.coverage);if(-1===n)return null;for(var s=t.ligatureSets[n],o=0;o<s.length;o++){r=s[o];for(var i=0;i<r.components.length;i++){var u=e.lookahead[i],l=r.components[i];if(u!==l)break;if(i===r.components.length-1)return r}}return null}function decompositionSubstitutionFormat1(e,t){var r=lookupCoverage(e,t.coverage);return-1===r?null:t.sequences[r]}function arabicWordStartCheck(e){var t=e.current,r=e.get(-1);return null===r&&isArabicChar(t)||!isArabicChar(r)&&isArabicChar(t)}function arabicWordEndCheck(e){var t=e.get(1);return null===t||!isArabicChar(t)}function arabicSentenceStartCheck(e){var t=e.current,r=e.get(-1);return(isArabicChar(t)||isTashkeelArabicChar(t))&&!isArabicChar(r)}function arabicSentenceEndCheck(e){var t=e.get(1);switch(!0){case null===t:return!0;case!isArabicChar(t)&&!isTashkeelArabicChar(t):var r=isWhiteSpace(t);if(!r)return!0;if(r){var a=!1;if(a=e.lookahead.some(function(e){return isArabicChar(e)||isTashkeelArabicChar(e)}),!a)return!0}break;default:return!1}}function singleSubstitutionFormat1$1(e,t,r){t[r].setState(e.tag,e.substitution)}function singleSubstitutionFormat2$1(e,t,r){t[r].setState(e.tag,e.substitution)}function chainingSubstitutionFormat3$1(e,t,r){e.substitution.forEach(function(a,n){var s=t[r+n];s.setState(e.tag,a)})}function ligatureSubstitutionFormat1$1(e,t,r){var a=t[r];a.setState(e.tag,e.substitution.ligGlyph);for(var n=e.substitution.components.length,s=0;s<n;s++)a=t[r+s+1],a.setState("deleted",!0)}function applySubstitution(e,t,r){e instanceof SubstitutionAction&&SUBSTITUTIONS[e.id]&&SUBSTITUTIONS[e.id](e,t,r)}function willConnectPrev(e){for(var t=[].concat(e.backtrack),r=t.length-1;r>=0;r--){var a=t[r],n=isIsolatedArabicChar(a),s=isTashkeelArabicChar(a);if(!n&&!s)return!0;if(n)return!1}return!1}function willConnectNext(e){if(isIsolatedArabicChar(e.current))return!1;for(var t=0;t<e.lookahead.length;t++){var r=e.lookahead[t],a=isTashkeelArabicChar(r);if(!a)return!0}return!1}function arabicPresentationForms(e){var t=this,r="arab",a=this.featuresTags[r],n=this.tokenizer.getRangeTokens(e);if(1!==n.length){var s=new ContextParams(n.map(function(e){return e.getState("glyphIndex")}),0),o=new ContextParams(n.map(function(e){return e.char}),0);n.forEach(function(e,i){if(!isTashkeelArabicChar(e.char)){s.setCurrentIndex(i),o.setCurrentIndex(i);var u,l=0;switch(willConnectPrev(o)&&(l|=1),willConnectNext(o)&&(l|=2),l){case 1:u="fina";break;case 2:u="init";break;case 3:u="medi"}if(-1!==a.indexOf(u)){var p=t.query.lookupFeature({tag:u,script:r,contextParams:s});if(p instanceof Error)return console.info(p.message);p.forEach(function(e,t){e instanceof SubstitutionAction&&(applySubstitution(e,n,t),s.context[t]=e.substitution)})}}})}}function getContextParams(e,t){var r=e.map(function(e){return e.activeState.value});return new ContextParams(r,t||0)}function arabicRequiredLigatures(e){var t=this,r="arab",a=this.tokenizer.getRangeTokens(e),n=getContextParams(a);n.context.forEach(function(e,s){n.setCurrentIndex(s);var o=t.query.lookupFeature({tag:"rlig",script:r,contextParams:n});o.length&&(o.forEach(function(e){return applySubstitution(e,a,s)}),n=getContextParams(a))})}function latinWordStartCheck(e){var t=e.current,r=e.get(-1);return null===r&&isLatinChar(t)||!isLatinChar(r)&&isLatinChar(t)}function latinWordEndCheck(e){var t=e.get(1);return null===t||!isLatinChar(t)}function getContextParams$1(e,t){var r=e.map(function(e){return e.activeState.value});return new ContextParams(r,t||0)}function latinLigature(e){var t=this,r="latn",a=this.tokenizer.getRangeTokens(e),n=getContextParams$1(a);n.context.forEach(function(e,s){n.setCurrentIndex(s);var o=t.query.lookupFeature({tag:"liga",script:r,contextParams:n});o.length&&(o.forEach(function(e){return applySubstitution(e,a,s)}),n=getContextParams$1(a))})}function Bidi(e){this.baseDir=e||"ltr",this.tokenizer=new Tokenizer,this.featuresTags={}}function registerContextChecker(e){var t=this.contextChecks[e+"Check"];return this.tokenizer.registerContextChecker(e,t.startCheck,t.endCheck)}function tokenizeText(){return registerContextChecker.call(this,"latinWord"),registerContextChecker.call(this,"arabicWord"),registerContextChecker.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function reverseArabicSentences(){var e=this,t=this.tokenizer.getContextRanges("arabicSentence");t.forEach(function(t){var r=e.tokenizer.getRangeTokens(t);e.tokenizer.replaceRange(t.startIndex,t.endOffset,r.reverse())})}function checkGlyphIndexStatus(){if(-1===this.tokenizer.registeredModifiers.indexOf("glyphIndex"))throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function applyArabicPresentationForms(){var e=this,t="arab";if(this.featuresTags.hasOwnProperty(t)){checkGlyphIndexStatus.call(this);var r=this.tokenizer.getContextRanges("arabicWord");r.forEach(function(t){arabicPresentationForms.call(e,t)})}}function applyArabicRequireLigatures(){var e=this,t="arab";if(this.featuresTags.hasOwnProperty(t)){var r=this.featuresTags[t];if(-1!==r.indexOf("rlig")){checkGlyphIndexStatus.call(this);var a=this.tokenizer.getContextRanges("arabicWord");a.forEach(function(t){arabicRequiredLigatures.call(e,t)})}}}function applyLatinLigatures(){var e=this,t="latn";if(this.featuresTags.hasOwnProperty(t)){var r=this.featuresTags[t];if(-1!==r.indexOf("liga")){checkGlyphIndexStatus.call(this);var a=this.tokenizer.getContextRanges("latinWord");a.forEach(function(t){latinLigature.call(e,t)})}}}function Font(e){e=e||{},e.tables=e.tables||{},e.empty||(checkArgument(e.familyName,"When creating a new Font object, familyName is required."),checkArgument(e.styleName,"When creating a new Font object, styleName is required."),checkArgument(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),checkArgument(e.ascender,"When creating a new Font object, ascender is required."),checkArgument(e.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables=Object.assign(e.tables,{os2:Object.assign({usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR},e.tables.os2)})),this.supported=!0,this.glyphs=new glyphset.GlyphSet(this,e.glyphs||[]),this.encoding=new DefaultEncoding(this),this.position=new Position(this),this.substitution=new Substitution(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new Hinting(this):void 0}})}function addName(e,t){var r=JSON.stringify(e),a=256;for(var n in t){var s=parseInt(n);if(s&&!(s<256)){if(JSON.stringify(t[n])===r)return s;a<=s&&(a=s+1)}}return t[a]=e,a}function makeFvarAxis(e,t,r){var a=addName(t.name,r);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:a}]}function parseFvarAxis(e,t,r){var a={},n=new parse.Parser(e,t);return a.tag=n.parseTag(),a.minValue=n.parseFixed(),a.defaultValue=n.parseFixed(),a.maxValue=n.parseFixed(),n.skip("uShort",1),a.name=r[n.parseUShort()]||{},a}function makeFvarInstance(e,t,r,a){for(var n=addName(t.name,a),s=[{name:"nameID_"+e,type:"USHORT",value:n},{name:"flags_"+e,type:"USHORT",value:0}],o=0;o<r.length;++o){var i=r[o].tag;s.push({name:"axis_"+e+" "+i,type:"FIXED",value:t.coordinates[i]<<16})}return s}function parseFvarInstance(e,t,r,a){var n={},s=new parse.Parser(e,t);n.name=a[s.parseUShort()]||{},s.skip("uShort",1),n.coordinates={};for(var o=0;o<r.length;++o)n.coordinates[r[o].tag]=s.parseFixed();return n}function makeFvarTable(e,t){var r=new table.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);r.offsetToData=r.sizeOf();for(var a=0;a<e.axes.length;a++)r.fields=r.fields.concat(makeFvarAxis(a,e.axes[a],t));for(var n=0;n<e.instances.length;n++)r.fields=r.fields.concat(makeFvarInstance(n,e.instances[n],e.axes,t));return r}function parseFvarTable(e,t,r){var a=new parse.Parser(e,t),n=a.parseULong();check.argument(65536===n,"Unsupported fvar table version.");var s=a.parseOffset16();a.skip("uShort",1);for(var o=a.parseUShort(),i=a.parseUShort(),u=a.parseUShort(),l=a.parseUShort(),p=[],c=0;c<o;c++)p.push(parseFvarAxis(e,t+s+c*i,r));for(var h=[],f=t+s+o*i,d=0;d<u;d++)h.push(parseFvarInstance(e,f+d*l,p,r));return{axes:p,instances:h}}function parseGDEFTable(e,t){t=t||0;var r=new Parser(e,t),a=r.parseVersion(1);check.argument(1===a||1.2===a||1.3===a,"Unsupported GDEF table version.");var n={version:a,classDef:r.parsePointer(Parser.classDef),attachList:r.parsePointer(attachList),ligCaretList:r.parsePointer(ligCaretList),markAttachClassDef:r.parsePointer(Parser.classDef)};return a>=1.2&&(n.markGlyphSets=r.parsePointer(markGlyphSets)),n}function parseGposTable(e,t){t=t||0;var r=new Parser(e,t),a=r.parseVersion(1);return check.argument(1===a||1.1===a,"Unsupported GPOS table version "+a),1===a?{version:a,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(subtableParsers$1)}:{version:a,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(subtableParsers$1),variations:r.parseFeatureVariationsList()}}function makeGposTable(e){return new table.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new table.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new table.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new table.LookupList(e.lookups,subtableMakers$1)}])}function parseWindowsKernTable(e){var t={};e.skip("uShort");var r=e.parseUShort();check.argument(0===r,"Unsupported kern sub-table version."),e.skip("uShort",2);var a=e.parseUShort();e.skip("uShort",3);for(var n=0;n<a;n+=1){var s=e.parseUShort(),o=e.parseUShort(),i=e.parseShort();t[s+","+o]=i}return t}function parseMacKernTable(e){var t={};e.skip("uShort");var r=e.parseULong();r>1&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");var a=e.parseUShort(),n=255&a;if(e.skip("uShort"),0===n){var s=e.parseUShort();e.skip("uShort",3);for(var o=0;o<s;o+=1){var i=e.parseUShort(),u=e.parseUShort(),l=e.parseShort();t[i+","+u]=l}}return t}function parseKernTable(e,t){var r=new parse.Parser(e,t),a=r.parseUShort();if(0===a)return parseWindowsKernTable(r);if(1===a)return parseMacKernTable(r);throw new Error("Unsupported kern table version ("+a+").")}function parseLocaTable(e,t,r,a){for(var n=new parse.Parser(e,t),s=a?n.parseUShort:n.parseULong,o=[],i=0;i<r+1;i+=1){var u=s.call(n);a&&(u*=2),o.push(u)}return o}function loadFromFile(e,t){var r=require("fs");r.readFile(e,function(e,r){if(e)return t(e.message);t(null,nodeBufferToArrayBuffer(r))})}function loadFromUrl(e,t){var r=new XMLHttpRequest;r.open("get",e,!0),r.responseType="arraybuffer",r.onload=function(){return r.response?t(null,r.response):t("Font could not be loaded: "+r.statusText)},r.onerror=function(){t("Font could not be loaded")},r.send()}function parseOpenTypeTableEntries(e,t){for(var r=[],a=12,n=0;n<t;n+=1){var s=parse.getTag(e,a),o=parse.getULong(e,a+4),i=parse.getULong(e,a+8),u=parse.getULong(e,a+12);r.push({tag:s,checksum:o,offset:i,length:u,compression:!1}),a+=16}return r}function parseWOFFTableEntries(e,t){for(var r=[],a=44,n=0;n<t;n+=1){var s=parse.getTag(e,a),o=parse.getULong(e,a+4),i=parse.getULong(e,a+8),u=parse.getULong(e,a+12),l=void 0;l=i<u&&"WOFF",r.push({tag:s,offset:o,compression:l,compressedLength:i,length:u}),a+=20}return r}function uncompressTable(e,t){if("WOFF"===t.compression){var r=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),a=new Uint8Array(t.length);if(tinyInflate(r,a),a.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");var n=new DataView(a.buffer,0);return{data:n,offset:0}}return{data:e,offset:t.offset}}function parseBuffer(e,t){var r,a;t=null==t?{}:t;var n,s,o,i,u,l,p,c,h,f,d,g,v,m=new Font({empty:!0}),y=new DataView(e,0),b=[],S=parse.getTag(y,0);if(S===String.fromCharCode(0,1,0,0)||"true"===S||"typ1"===S)m.outlinesFormat="truetype",n=parse.getUShort(y,4),b=parseOpenTypeTableEntries(y,n);else if("OTTO"===S)m.outlinesFormat="cff",n=parse.getUShort(y,4),b=parseOpenTypeTableEntries(y,n);else{if("wOFF"!==S)throw new Error("Unsupported OpenType signature "+S);var T=parse.getTag(y,4);if(T===String.fromCharCode(0,1,0,0))m.outlinesFormat="truetype";else{if("OTTO"!==T)throw new Error("Unsupported OpenType flavor "+S);m.outlinesFormat="cff"}n=parse.getUShort(y,12),b=parseWOFFTableEntries(y,n)}for(var x=0;x<n;x+=1){var k=b[x],P=void 0;switch(k.tag){case"cmap":P=uncompressTable(y,k),m.tables.cmap=cmap.parse(P.data,P.offset),m.encoding=new CmapEncoding(m.tables.cmap);break;case"cvt ":P=uncompressTable(y,k),v=new parse.Parser(P.data,P.offset),m.tables.cvt=v.parseShortList(k.length/2);break;case"fvar":o=k;break;case"fpgm":P=uncompressTable(y,k),v=new parse.Parser(P.data,P.offset),m.tables.fpgm=v.parseByteList(k.length);break;case"head":P=uncompressTable(y,k),m.tables.head=head.parse(P.data,P.offset),m.unitsPerEm=m.tables.head.unitsPerEm,r=m.tables.head.indexToLocFormat;break;case"hhea":P=uncompressTable(y,k),m.tables.hhea=hhea.parse(P.data,P.offset),m.ascender=m.tables.hhea.ascender,m.descender=m.tables.hhea.descender,m.numberOfHMetrics=m.tables.hhea.numberOfHMetrics;break;case"hmtx":c=k;break;case"ltag":P=uncompressTable(y,k),a=ltag.parse(P.data,P.offset);break;case"maxp":P=uncompressTable(y,k),m.tables.maxp=maxp.parse(P.data,P.offset),m.numGlyphs=m.tables.maxp.numGlyphs;break;case"name":d=k;break;case"OS/2":P=uncompressTable(y,k),m.tables.os2=os2.parse(P.data,P.offset);break;case"post":P=uncompressTable(y,k),m.tables.post=post.parse(P.data,P.offset),m.glyphNames=new GlyphNames(m.tables.post);break;case"prep":P=uncompressTable(y,k),v=new parse.Parser(P.data,P.offset),m.tables.prep=v.parseByteList(k.length);break;case"glyf":i=k;break;case"loca":f=k;break;case"CFF ":s=k;break;case"kern":h=k;break;case"GDEF":u=k;break;case"GPOS":l=k;break;case"GSUB":p=k;break;case"meta":g=k}}var U=uncompressTable(y,d);if(m.tables.name=_name.parse(U.data,U.offset,a),m.names=m.tables.name,i&&f){var R=0===r,C=uncompressTable(y,f),O=loca.parse(C.data,C.offset,m.numGlyphs,R),E=uncompressTable(y,i);m.glyphs=glyf.parse(E.data,E.offset,O,m,t)}else{if(!s)throw new Error("Font doesn't contain TrueType or CFF outlines.");var L=uncompressTable(y,s);cff.parse(L.data,L.offset,m,t)}var D=uncompressTable(y,c);if(hmtx.parse(m,D.data,D.offset,m.numberOfHMetrics,m.numGlyphs,m.glyphs,t),addGlyphNames(m,t),h){var F=uncompressTable(y,h);m.kerningPairs=kern.parse(F.data,F.offset)}else m.kerningPairs={};if(u){var I=uncompressTable(y,u);m.tables.gdef=gdef.parse(I.data,I.offset)}if(l){var M=uncompressTable(y,l);m.tables.gpos=gpos.parse(M.data,M.offset),m.position.init()}if(p){var w=uncompressTable(y,p);m.tables.gsub=gsub.parse(w.data,w.offset)}if(o){var G=uncompressTable(y,o);m.tables.fvar=fvar.parse(G.data,G.offset,m.names)}if(g){var A=uncompressTable(y,g);m.tables.meta=meta.parse(A.data,A.offset),m.metas=m.tables.meta}return m}function load(e,t,r){r=null==r?{}:r;var a="undefined"==typeof window,n=a&&!r.isUrl?loadFromFile:loadFromUrl;return new Promise(function(a,s){n(e,function(e,n){if(e){if(t)return t(e);s(e)}var o;try{o=parseBuffer(n,r)}catch(e){if(t)return t(e,null);s(e)}if(t)return t(null,o);a(o)})})}function loadSync(e,t){var r=require("fs"),a=r.readFileSync(e);return parseBuffer(nodeBufferToArrayBuffer(a),t)}String.prototype.codePointAt||function(){var e=function(){try{var e={},t=Object.defineProperty,r=t(e,e,e)&&t}catch(e){}return r}(),t=function(e){if(null==this)throw TypeError();var t=String(this),r=t.length,a=e?Number(e):0;if(a!=a&&(a=0),!(a<0||a>=r)){var n,s=t.charCodeAt(a);return s>=55296&&s<=56319&&r>a+1&&(n=t.charCodeAt(a+1),n>=56320&&n<=57343)?1024*(s-55296)+n-56320+65536:s}};e?e(String.prototype,"codePointAt",{value:t,configurable:!0,writable:!0}):String.prototype.codePointAt=t}();var TINF_OK=0,TINF_DATA_ERROR=-3,sltree=new Tree,sdtree=new Tree,length_bits=new Uint8Array(30),length_base=new Uint16Array(30),dist_bits=new Uint8Array(30),dist_base=new Uint16Array(30),clcidx=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),code_tree=new Tree,lengths=new Uint8Array(320),offs=new Uint16Array(16);tinf_build_fixed_trees(sltree,sdtree),tinf_build_bits_base(length_bits,length_base,4,3),tinf_build_bits_base(dist_bits,dist_base,2,1),length_bits[28]=0,length_base[28]=258;var tinyInflate=tinf_uncompress;BoundingBox.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},BoundingBox.prototype.addPoint=function(e,t){"number"==typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"==typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},BoundingBox.prototype.addX=function(e){this.addPoint(e,null)},BoundingBox.prototype.addY=function(e){this.addPoint(null,e)},BoundingBox.prototype.addBezier=function(e,t,r,a,n,s,o,i){var u=[e,t],l=[r,a],p=[n,s],c=[o,i];this.addPoint(e,t),this.addPoint(o,i);for(var h=0;h<=1;h++){var f=6*u[h]-12*l[h]+6*p[h],d=-3*u[h]+9*l[h]-9*p[h]+3*c[h],g=3*l[h]-3*u[h];if(0!==d){var v=Math.pow(f,2)-4*g*d;if(!(v<0)){var m=(-f+Math.sqrt(v))/(2*d);0<m&&m<1&&(0===h&&this.addX(derive(u[h],l[h],p[h],c[h],m)),1===h&&this.addY(derive(u[h],l[h],p[h],c[h],m)));var y=(-f-Math.sqrt(v))/(2*d);0<y&&y<1&&(0===h&&this.addX(derive(u[h],l[h],p[h],c[h],y)),1===h&&this.addY(derive(u[h],l[h],p[h],c[h],y)))}}else{if(0===f)continue;var b=-g/f;0<b&&b<1&&(0===h&&this.addX(derive(u[h],l[h],p[h],c[h],b)),1===h&&this.addY(derive(u[h],l[h],p[h],c[h],b)))}}},BoundingBox.prototype.addQuad=function(e,t,r,a,n,s){var o=e+2/3*(r-e),i=t+2/3*(a-t),u=o+1/3*(n-e),l=i+1/3*(s-t);this.addBezier(e,t,o,i,u,l,n,s)},Path.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},Path.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},Path.prototype.curveTo=Path.prototype.bezierCurveTo=function(e,t,r,a,n,s){this.commands.push({type:"C",x1:e,y1:t,x2:r,y2:a,x:n,y:s})},Path.prototype.quadTo=Path.prototype.quadraticCurveTo=function(e,t,r,a){this.commands.push({type:"Q",x1:e,y1:t,x:r,y:a})},
Path.prototype.close=Path.prototype.closePath=function(){this.commands.push({type:"Z"})},Path.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof BoundingBox){var t=e;return this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close()}Array.prototype.push.apply(this.commands,e)},Path.prototype.getBoundingBox=function(){for(var e=new BoundingBox,t=0,r=0,a=0,n=0,s=0;s<this.commands.length;s++){var o=this.commands[s];switch(o.type){case"M":e.addPoint(o.x,o.y),t=a=o.x,r=n=o.y;break;case"L":e.addPoint(o.x,o.y),a=o.x,n=o.y;break;case"Q":e.addQuad(a,n,o.x1,o.y1,o.x,o.y),a=o.x,n=o.y;break;case"C":e.addBezier(a,n,o.x1,o.y1,o.x2,o.y2,o.x,o.y),a=o.x,n=o.y;break;case"Z":a=t,n=r;break;default:throw new Error("Unexpected path command "+o.type)}}return e.isEmpty()&&e.addPoint(0,0),e},Path.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var r=this.commands[t];"M"===r.type?e.moveTo(r.x,r.y):"L"===r.type?e.lineTo(r.x,r.y):"C"===r.type?e.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):"Q"===r.type?e.quadraticCurveTo(r.x1,r.y1,r.x,r.y):"Z"===r.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},Path.prototype.toPathData=function(e){function t(t){return Math.round(t)===t?""+Math.round(t):t.toFixed(e)}function r(){for(var e=arguments,r="",a=0;a<arguments.length;a+=1){var n=e[a];n>=0&&a>0&&(r+=" "),r+=t(n)}return r}e=void 0!==e?e:2;for(var a="",n=0;n<this.commands.length;n+=1){var s=this.commands[n];"M"===s.type?a+="M"+r(s.x,s.y):"L"===s.type?a+="L"+r(s.x,s.y):"C"===s.type?a+="C"+r(s.x1,s.y1,s.x2,s.y2,s.x,s.y):"Q"===s.type?a+="Q"+r(s.x1,s.y1,s.x,s.y):"Z"===s.type&&(a+="Z")}return a},Path.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+="/>",t},Path.prototype.toDOMElement=function(e){var t=this.toPathData(e),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",t),r};var check={fail:fail,argument:argument,assert:argument},LIMIT16=32768,LIMIT32=2147483648,decode={},encode={},sizeOf={};encode.BYTE=function(e){return check.argument(e>=0&&e<=255,"Byte value should be between 0 and 255."),[e]},sizeOf.BYTE=constant(1),encode.CHAR=function(e){return[e.charCodeAt(0)]},sizeOf.CHAR=constant(1),encode.CHARARRAY=function(e){void 0===e&&(e="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var t=[],r=0;r<e.length;r+=1)t[r]=e.charCodeAt(r);return t},sizeOf.CHARARRAY=function(e){return void 0===e?0:e.length},encode.USHORT=function(e){return[e>>8&255,255&e]},sizeOf.USHORT=constant(2),encode.SHORT=function(e){return e>=LIMIT16&&(e=-(2*LIMIT16-e)),[e>>8&255,255&e]},sizeOf.SHORT=constant(2),encode.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},sizeOf.UINT24=constant(3),encode.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},sizeOf.ULONG=constant(4),encode.LONG=function(e){return e>=LIMIT32&&(e=-(2*LIMIT32-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},sizeOf.LONG=constant(4),encode.FIXED=encode.ULONG,sizeOf.FIXED=sizeOf.ULONG,encode.FWORD=encode.SHORT,sizeOf.FWORD=sizeOf.SHORT,encode.UFWORD=encode.USHORT,sizeOf.UFWORD=sizeOf.USHORT,encode.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},sizeOf.LONGDATETIME=constant(8),encode.TAG=function(e){return check.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},sizeOf.TAG=constant(4),encode.Card8=encode.BYTE,sizeOf.Card8=sizeOf.BYTE,encode.Card16=encode.USHORT,sizeOf.Card16=sizeOf.USHORT,encode.OffSize=encode.BYTE,sizeOf.OffSize=sizeOf.BYTE,encode.SID=encode.USHORT,sizeOf.SID=sizeOf.USHORT,encode.NUMBER=function(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?(e-=108,[247+(e>>8),255&e]):e>=-1131&&e<=-108?(e=-e-108,[251+(e>>8),255&e]):e>=-32768&&e<=32767?encode.NUMBER16(e):encode.NUMBER32(e)},sizeOf.NUMBER=function(e){return encode.NUMBER(e).length},encode.NUMBER16=function(e){return[28,e>>8&255,255&e]},sizeOf.NUMBER16=constant(3),encode.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},sizeOf.NUMBER32=constant(5),encode.REAL=function(e){var t=e.toString(),r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(r){var a=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));t=(Math.round(e*a)/a).toString()}for(var n="",s=0,o=t.length;s<o;s+=1){var i=t[s];n+="e"===i?"-"===t[++s]?"c":"b":"."===i?"a":"-"===i?"e":i}n+=1&n.length?"f":"ff";for(var u=[30],l=0,p=n.length;l<p;l+=2)u.push(parseInt(n.substr(l,2),16));return u},sizeOf.REAL=function(e){return encode.REAL(e).length},encode.NAME=encode.CHARARRAY,sizeOf.NAME=sizeOf.CHARARRAY,encode.STRING=encode.CHARARRAY,sizeOf.STRING=sizeOf.CHARARRAY,decode.UTF8=function(e,t,r){for(var a=[],n=r,s=0;s<n;s++,t+=1)a[s]=e.getUint8(t);return String.fromCharCode.apply(null,a)},decode.UTF16=function(e,t,r){for(var a=[],n=r/2,s=0;s<n;s++,t+=2)a[s]=e.getUint16(t);return String.fromCharCode.apply(null,a)},encode.UTF16=function(e){for(var t=[],r=0;r<e.length;r+=1){var a=e.charCodeAt(r);t[t.length]=a>>8&255,t[t.length]=255&a}return t},sizeOf.UTF16=function(e){return 2*e.length};var eightBitMacEncodings={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"};decode.MACSTRING=function(e,t,r,a){var n=eightBitMacEncodings[a];if(void 0!==n){for(var s="",o=0;o<r;o++){var i=e.getUint8(t+o);s+=i<=127?String.fromCharCode(i):n[127&i]}return s}};var macEncodingCacheKeys,macEncodingTableCache="function"==typeof WeakMap&&new WeakMap,getMacEncodingTable=function(e){if(!macEncodingCacheKeys)for(var t in macEncodingCacheKeys={},eightBitMacEncodings)macEncodingCacheKeys[t]=new String(t);var r=macEncodingCacheKeys[e];if(void 0!==r){if(macEncodingTableCache){var a=macEncodingTableCache.get(r);if(void 0!==a)return a}var n=eightBitMacEncodings[e];if(void 0!==n){for(var s={},o=0;o<n.length;o++)s[n.charCodeAt(o)]=o+128;return macEncodingTableCache&&macEncodingTableCache.set(r,s),s}}};encode.MACSTRING=function(e,t){var r=getMacEncodingTable(t);if(void 0!==r){for(var a=[],n=0;n<e.length;n++){var s=e.charCodeAt(n);if(s>=128&&(s=r[s],void 0===s))return;a[n]=s}return a}},sizeOf.MACSTRING=function(e,t){var r=encode.MACSTRING(e,t);return void 0!==r?r.length:0},encode.VARDELTAS=function(e){for(var t=0,r=[];t<e.length;){var a=e[t];t=0===a?encodeVarDeltaRunAsZeroes(e,t,r):a>=-128&&a<=127?encodeVarDeltaRunAsBytes(e,t,r):encodeVarDeltaRunAsWords(e,t,r)}return r},encode.INDEX=function(e){for(var t=1,r=[t],a=[],n=0;n<e.length;n+=1){var s=encode.OBJECT(e[n]);Array.prototype.push.apply(a,s),t+=s.length,r.push(t)}if(0===a.length)return[0,0];for(var o=[],i=1+Math.floor(Math.log(t)/Math.log(2))/8|0,u=[void 0,encode.BYTE,encode.USHORT,encode.UINT24,encode.ULONG][i],l=0;l<r.length;l+=1){var p=u(r[l]);Array.prototype.push.apply(o,p)}return Array.prototype.concat(encode.Card16(e.length),encode.OffSize(i),o,a)},sizeOf.INDEX=function(e){return encode.INDEX(e).length},encode.DICT=function(e){for(var t=[],r=Object.keys(e),a=r.length,n=0;n<a;n+=1){var s=parseInt(r[n],0),o=e[s];t=t.concat(encode.OPERAND(o.value,o.type)),t=t.concat(encode.OPERATOR(s))}return t},sizeOf.DICT=function(e){return encode.DICT(e).length},encode.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},encode.OPERAND=function(e,t){var r=[];if(Array.isArray(t))for(var a=0;a<t.length;a+=1)check.argument(e.length===t.length,"Not enough arguments given for type"+t),r=r.concat(encode.OPERAND(e[a],t[a]));else if("SID"===t)r=r.concat(encode.NUMBER(e));else if("offset"===t)r=r.concat(encode.NUMBER32(e));else if("number"===t)r=r.concat(encode.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);r=r.concat(encode.REAL(e))}return r},encode.OP=encode.BYTE,sizeOf.OP=sizeOf.BYTE;var wmm="function"==typeof WeakMap&&new WeakMap;encode.CHARSTRING=function(e){if(wmm){var t=wmm.get(e);if(void 0!==t)return t}for(var r=[],a=e.length,n=0;n<a;n+=1){var s=e[n];r=r.concat(encode[s.type](s.value))}return wmm&&wmm.set(e,r),r},sizeOf.CHARSTRING=function(e){return encode.CHARSTRING(e).length},encode.OBJECT=function(e){var t=encode[e.type];return check.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},sizeOf.OBJECT=function(e){var t=sizeOf[e.type];return check.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},encode.TABLE=function(e){for(var t=[],r=e.fields.length,a=[],n=[],s=0;s<r;s+=1){var o=e.fields[s],i=encode[o.type];check.argument(void 0!==i,"No encoding function for field type "+o.type+" ("+o.name+")");var u=e[o.name];void 0===u&&(u=o.value);var l=i(u);"TABLE"===o.type?(n.push(t.length),t=t.concat([0,0]),a.push(l)):t=t.concat(l)}for(var p=0;p<a.length;p+=1){var c=n[p],h=t.length;check.argument(h<65536,"Table "+e.tableName+" too big."),t[c]=h>>8,t[c+1]=255&h,t=t.concat(a[p])}return t},sizeOf.TABLE=function(e){for(var t=0,r=e.fields.length,a=0;a<r;a+=1){var n=e.fields[a],s=sizeOf[n.type];check.argument(void 0!==s,"No sizeOf function for field type "+n.type+" ("+n.name+")");var o=e[n.name];void 0===o&&(o=n.value),t+=s(o),"TABLE"===n.type&&(t+=2)}return t},encode.RECORD=encode.TABLE,sizeOf.RECORD=sizeOf.TABLE,encode.LITERAL=function(e){return e},sizeOf.LITERAL=function(e){return e.length},Table.prototype.encode=function(){return encode.TABLE(this)},Table.prototype.sizeOf=function(){return sizeOf.TABLE(this)},Coverage.prototype=Object.create(Table.prototype),Coverage.prototype.constructor=Coverage,ScriptList.prototype=Object.create(Table.prototype),ScriptList.prototype.constructor=ScriptList,FeatureList.prototype=Object.create(Table.prototype),FeatureList.prototype.constructor=FeatureList,LookupList.prototype=Object.create(Table.prototype),LookupList.prototype.constructor=LookupList;var table={Table:Table,Record:Table,Coverage:Coverage,ScriptList:ScriptList,FeatureList:FeatureList,LookupList:LookupList,ushortList:ushortList,tableList:tableList,recordList:recordList},typeOffsets={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};Parser.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},Parser.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},Parser.prototype.parseCard8=Parser.prototype.parseByte,Parser.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},Parser.prototype.parseCard16=Parser.prototype.parseUShort,Parser.prototype.parseSID=Parser.prototype.parseUShort,Parser.prototype.parseOffset16=Parser.prototype.parseUShort,Parser.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},Parser.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},Parser.prototype.parseULong=function(){var e=getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},Parser.prototype.parseOffset32=Parser.prototype.parseULong,Parser.prototype.parseFixed=function(){var e=getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},Parser.prototype.parseString=function(e){var t=this.data,r=this.offset+this.relativeOffset,a="";this.relativeOffset+=e;for(var n=0;n<e;n++)a+=String.fromCharCode(t.getUint8(r+n));return a},Parser.prototype.parseTag=function(){return this.parseString(4)},Parser.prototype.parseLongDateTime=function(){var e=getULong(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},Parser.prototype.parseVersion=function(e){var t=getUShort(this.data,this.offset+this.relativeOffset),r=getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===e&&(e=4096),t+r/e/10},Parser.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=typeOffsets[e]*t},Parser.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());for(var t=new Array(e),r=this.data,a=this.offset+this.relativeOffset,n=0;n<e;n++)t[n]=r.getUint32(a),a+=4;return this.relativeOffset+=4*e,t},Parser.prototype.parseOffset16List=Parser.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),r=this.data,a=this.offset+this.relativeOffset,n=0;n<e;n++)t[n]=r.getUint16(a),a+=2;return this.relativeOffset+=2*e,t},Parser.prototype.parseShortList=function(e){for(var t=new Array(e),r=this.data,a=this.offset+this.relativeOffset,n=0;n<e;n++)t[n]=r.getInt16(a),a+=2;return this.relativeOffset+=2*e,t},Parser.prototype.parseByteList=function(e){for(var t=new Array(e),r=this.data,a=this.offset+this.relativeOffset,n=0;n<e;n++)t[n]=r.getUint8(a++);return this.relativeOffset+=e,t},Parser.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),a=0;a<e;a++)r[a]=t.call(this);return r},Parser.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var r=new Array(e),a=0;a<e;a++)r[a]=t.call(this);return r},Parser.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),a=Object.keys(t),n=0;n<e;n++){for(var s={},o=0;o<a.length;o++){var i=a[o],u=t[i];s[i]=u.call(this)}r[n]=s}return r},Parser.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var r=new Array(e),a=Object.keys(t),n=0;n<e;n++){for(var s={},o=0;o<a.length;o++){var i=a[o],u=t[i];s[i]=u.call(this)}r[n]=s}return r},Parser.prototype.parseStruct=function(e){if("function"==typeof e)return e.call(this);for(var t=Object.keys(e),r={},a=0;a<t.length;a++){var n=t[a],s=e[n];r[n]=s.call(this)}return r},Parser.prototype.parseValueRecord=function(e){if(void 0===e&&(e=this.parseUShort()),0!==e){var t={};return 1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t}},Parser.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),r=new Array(t),a=0;a<t;a++)r[a]=this.parseValueRecord(e);return r},Parser.prototype.parsePointer=function(e){var t=this.parseOffset16();if(t>0)return new Parser(this.data,this.offset+t).parseStruct(e)},Parser.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(t>0)return new Parser(this.data,this.offset+t).parseStruct(e)},Parser.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),r=t.length,a=this.relativeOffset,n=new Array(r),s=0;s<r;s++){var o=t[s];if(0!==o)if(this.relativeOffset=o,e){for(var i=this.parseOffset16List(),u=new Array(i.length),l=0;l<i.length;l++)this.relativeOffset=o+i[l],u[l]=e.call(this);n[s]=u}else n[s]=this.parseUShortList();else n[s]=void 0}return this.relativeOffset=a,n},Parser.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),r=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(r)};if(2===t){for(var a=new Array(r),n=0;n<r;n++)a[n]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:a}}throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.")},Parser.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:Parser.uShort,end:Parser.uShort,classId:Parser.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},Parser.list=function(e,t){return function(){return this.parseList(e,t)}},Parser.list32=function(e,t){return function(){return this.parseList32(e,t)}},Parser.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},Parser.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},Parser.pointer=function(e){return function(){return this.parsePointer(e)}},Parser.pointer32=function(e){return function(){return this.parsePointer32(e)}},Parser.tag=Parser.prototype.parseTag,Parser.byte=Parser.prototype.parseByte,Parser.uShort=Parser.offset16=Parser.prototype.parseUShort,Parser.uShortList=Parser.prototype.parseUShortList,Parser.uLong=Parser.offset32=Parser.prototype.parseULong,Parser.uLongList=Parser.prototype.parseULongList,Parser.struct=Parser.prototype.parseStruct,Parser.coverage=Parser.prototype.parseCoverage,Parser.classDef=Parser.prototype.parseClassDef;var langSysTable={reserved:Parser.uShort,reqFeatureIndex:Parser.uShort,featureIndexes:Parser.uShortList};Parser.prototype.parseScriptList=function(){return this.parsePointer(Parser.recordList({tag:Parser.tag,script:Parser.pointer({defaultLangSys:Parser.pointer(langSysTable),langSysRecords:Parser.recordList({tag:Parser.tag,langSys:Parser.pointer(langSysTable)})})}))||[]},Parser.prototype.parseFeatureList=function(){return this.parsePointer(Parser.recordList({tag:Parser.tag,feature:Parser.pointer({featureParams:Parser.offset16,lookupListIndexes:Parser.uShortList})}))||[]},Parser.prototype.parseLookupList=function(e){return this.parsePointer(Parser.list(Parser.pointer(function(){var t=this.parseUShort();check.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");var r=this.parseUShort(),a=16&r;return{lookupType:t,lookupFlag:r,subtables:this.parseList(Parser.pointer(e[t])),markFilteringSet:a?this.parseUShort():void 0}})))||[]},Parser.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var e=this.parseUShort(),t=this.parseUShort();check.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown.");var r=this.parseRecordList32({conditionSetOffset:Parser.offset32,featureTableSubstitutionOffset:Parser.offset32});return r})||[]};var parse={getByte:getByte,getCard8:getByte,getUShort:getUShort,getCard16:getUShort,getShort:getShort,getULong:getULong,getFixed:getFixed,getTag:getTag,getOffset:getOffset,getBytes:getBytes,bytesToString:bytesToString,Parser:Parser},cmap={parse:parseCmapTable,make:makeCmapTable},cffStandardStrings=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],cffStandardEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],cffExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],standardNames=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];DefaultEncoding.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),r=this.font.glyphs;if(r)for(var a=0;a<r.length;a+=1)for(var n=r.get(a),s=0;s<n.unicodes.length;s+=1)if(n.unicodes[s]===t)return a;return null},CmapEncoding.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},CffEncoding.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),r=this.encoding[t];return this.charset.indexOf(r)},GlyphNames.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},GlyphNames.prototype.glyphIndexToName=function(e){return this.names[e]};var draw={line:line};Glyph.prototype.bindConstructorValues=function(e){this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],"xMin"in e&&(this.xMin=e.xMin),"yMin"in e&&(this.yMin=e.yMin),"xMax"in e&&(this.xMax=e.xMax),"yMax"in e&&(this.yMax=e.yMax),"advanceWidth"in e&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",getPathDefinition(this,e.path))},Glyph.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},Glyph.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Glyph.prototype.getPath=function(e,t,r,a,n){var s,o;e=void 0!==e?e:0,t=void 0!==t?t:0,r=void 0!==r?r:72,a||(a={});var i=a.xScale,u=a.yScale;if(a.hinting&&n&&n.hinting&&(o=this.path&&n.hinting.exec(this,r)),o)s=n.hinting.getCommands(o),
e=Math.round(e),t=Math.round(t),i=u=1;else{s=this.path.commands;var l=1/(this.path.unitsPerEm||1e3)*r;void 0===i&&(i=l),void 0===u&&(u=l)}for(var p=new Path,c=0;c<s.length;c+=1){var h=s[c];"M"===h.type?p.moveTo(e+h.x*i,t+-h.y*u):"L"===h.type?p.lineTo(e+h.x*i,t+-h.y*u):"Q"===h.type?p.quadraticCurveTo(e+h.x1*i,t+-h.y1*u,e+h.x*i,t+-h.y*u):"C"===h.type?p.curveTo(e+h.x1*i,t+-h.y1*u,e+h.x2*i,t+-h.y2*u,e+h.x*i,t+-h.y*u):"Z"===h.type&&p.closePath()}return p},Glyph.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],r=0;r<this.points.length;r+=1){var a=this.points[r];t.push(a),a.lastPointOfContour&&(e.push(t),t=[])}return check.argument(0===t.length,"There are still points left in the current contour."),e},Glyph.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],r=[],a=0;a<e.length;a+=1){var n=e[a];"Z"!==n.type&&(t.push(n.x),r.push(n.y)),"Q"!==n.type&&"C"!==n.type||(t.push(n.x1),r.push(n.y1)),"C"===n.type&&(t.push(n.x2),r.push(n.y2))}var s={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,r),leftSideBearing:this.leftSideBearing};return isFinite(s.xMin)||(s.xMin=0),isFinite(s.xMax)||(s.xMax=this.advanceWidth),isFinite(s.yMin)||(s.yMin=0),isFinite(s.yMax)||(s.yMax=0),s.rightSideBearing=this.advanceWidth-s.leftSideBearing-(s.xMax-s.xMin),s},Glyph.prototype.draw=function(e,t,r,a,n){this.getPath(t,r,a,n).draw(e)},Glyph.prototype.drawPoints=function(e,t,r,a){function n(t,r,a,n){e.beginPath();for(var s=0;s<t.length;s+=1)e.moveTo(r+t[s].x*n,a+t[s].y*n),e.arc(r+t[s].x*n,a+t[s].y*n,2,0,2*Math.PI,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,r=void 0!==r?r:0,a=void 0!==a?a:24;for(var s=1/this.path.unitsPerEm*a,o=[],i=[],u=this.path,l=0;l<u.commands.length;l+=1){var p=u.commands[l];void 0!==p.x&&o.push({x:p.x,y:-p.y}),void 0!==p.x1&&i.push({x:p.x1,y:-p.y1}),void 0!==p.x2&&i.push({x:p.x2,y:-p.y2})}e.fillStyle="blue",n(o,t,r,s),e.fillStyle="red",n(i,t,r,s)},Glyph.prototype.drawMetrics=function(e,t,r,a){var n;t=void 0!==t?t:0,r=void 0!==r?r:0,a=void 0!==a?a:24,n=1/this.path.unitsPerEm*a,e.lineWidth=1,e.strokeStyle="black",draw.line(e,t,-1e4,t,1e4),draw.line(e,-1e4,r,1e4,r);var s=this.xMin||0,o=this.yMin||0,i=this.xMax||0,u=this.yMax||0,l=this.advanceWidth||0;e.strokeStyle="blue",draw.line(e,t+s*n,-1e4,t+s*n,1e4),draw.line(e,t+i*n,-1e4,t+i*n,1e4),draw.line(e,-1e4,r+-o*n,1e4,r+-o*n),draw.line(e,-1e4,r+-u*n,1e4,r+-u*n),e.strokeStyle="green",draw.line(e,t+l*n,-1e4,t+l*n,1e4)},GlyphSet.prototype.get=function(e){if(void 0===this.glyphs[e]){this.font._push(e),"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]());var t=this.glyphs[e],r=this.font._IndexToUnicodeMap[e];if(r)for(var a=0;a<r.unicodes.length;a++)t.addUnicode(r.unicodes[a]);this.font.cffEncoding?this.font.isCIDFont?t.name="gid"+e:t.name=this.font.cffEncoding.charset[e]:this.font.glyphNames.names&&(t.name=this.font.glyphNames.glyphIndexToName(e)),this.glyphs[e].advanceWidth=this.font._hmtxTableData[e].advanceWidth,this.glyphs[e].leftSideBearing=this.font._hmtxTableData[e].leftSideBearing}else"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]());return this.glyphs[e]},GlyphSet.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};var glyphset={GlyphSet:GlyphSet,glyphLoader:glyphLoader,ttfGlyphLoader:ttfGlyphLoader,cffGlyphLoader:cffGlyphLoader},TOP_DICT_META=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],PRIVATE_DICT_META=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}],cff={parse:parseCFFTable,make:makeCFFTable},head={parse:parseHeadTable,make:makeHeadTable},hhea={parse:parseHheaTable,make:makeHheaTable},hmtx={parse:parseHmtxTable,make:makeHmtxTable},ltag={make:makeLtagTable,parse:parseLtagTable},maxp={parse:parseMaxpTable,make:makeMaxpTable},nameTableNames=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],macLanguages={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},macLanguageToScript={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},windowsLanguages={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},utf16="utf-16",macScriptEncodings={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},macLanguageEncodings={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"},_name={parse:parseNameTable,make:makeNameTable},unicodeRanges=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],os2={parse:parseOS2Table,make:makeOS2Table,unicodeRanges:unicodeRanges,getUnicodeRange:getUnicodeRange},post={parse:parsePostTable,make:makePostTable},subtableParsers=new Array(9);subtableParsers[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(Parser.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(Parser.coverage),substitute:this.parseOffset16List()}:void check.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},subtableParsers[2]=function(){var e=this.parseUShort();return check.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Parser.coverage),sequences:this.parseListOfLists()}},subtableParsers[3]=function(){var e=this.parseUShort();return check.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Parser.coverage),alternateSets:this.parseListOfLists()}},subtableParsers[4]=function(){var e=this.parseUShort();return check.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Parser.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var lookupRecordDesc={sequenceIndex:Parser.uShort,lookupListIndex:Parser.uShort};subtableParsers[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{substFormat:t,coverage:this.parsePointer(Parser.coverage),ruleSets:this.parseListOfLists(function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,lookupRecordDesc)}})};if(2===t)return{substFormat:t,coverage:this.parsePointer(Parser.coverage),classDef:this.parsePointer(Parser.classDef),classSets:this.parseListOfLists(function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,lookupRecordDesc)}})};if(3===t){var r=this.parseUShort(),a=this.parseUShort();return{substFormat:t,coverages:this.parseList(r,Parser.pointer(Parser.coverage)),lookupRecords:this.parseRecordList(a,lookupRecordDesc)}}check.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},subtableParsers[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(Parser.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lookupRecordDesc)}})}:2===t?{substFormat:2,coverage:this.parsePointer(Parser.coverage),backtrackClassDef:this.parsePointer(Parser.classDef),inputClassDef:this.parsePointer(Parser.classDef),lookaheadClassDef:this.parsePointer(Parser.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lookupRecordDesc)}})}:3===t?{substFormat:3,backtrackCoverage:this.parseList(Parser.pointer(Parser.coverage)),inputCoverage:this.parseList(Parser.pointer(Parser.coverage)),lookaheadCoverage:this.parseList(Parser.pointer(Parser.coverage)),lookupRecords:this.parseRecordList(lookupRecordDesc)}:void check.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},subtableParsers[7]=function(){var e=this.parseUShort();check.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),r=new Parser(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:subtableParsers[t].call(r)}},subtableParsers[8]=function(){var e=this.parseUShort();return check.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Parser.coverage),backtrackCoverage:this.parseList(Parser.pointer(Parser.coverage)),lookaheadCoverage:this.parseList(Parser.pointer(Parser.coverage)),substitutes:this.parseUShortList()}};var subtableMakers=new Array(9);subtableMakers[1]=function(e){return 1===e.substFormat?new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new table.Coverage(e.coverage)}].concat(table.ushortList("substitute",e.substitute)))},subtableMakers[2]=function(e){return check.assert(1===e.substFormat,"Lookup type 2 substFormat must be 1."),new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(e.coverage)}].concat(table.tableList("seqSet",e.sequences,function(e){return new table.Table("sequenceSetTable",table.ushortList("sequence",e))})))},subtableMakers[3]=function(e){return check.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(e.coverage)}].concat(table.tableList("altSet",e.alternateSets,function(e){return new table.Table("alternateSetTable",table.ushortList("alternate",e))})))},subtableMakers[4]=function(e){return check.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(e.coverage)}].concat(table.tableList("ligSet",e.ligatureSets,function(e){return new table.Table("ligatureSetTable",table.tableList("ligature",e,function(e){return new table.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(table.ushortList("component",e.components,e.components.length+1)))}))})))},subtableMakers[6]=function(e){if(1===e.substFormat){var t=new table.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:e.substFormat},{name:"coverage",type:"TABLE",value:new table.Coverage(e.coverage)}].concat(table.tableList("chainRuleSet",e.chainRuleSets,function(e){return new table.Table("chainRuleSetTable",table.tableList("chainRule",e,function(e){var t=table.ushortList("backtrackGlyph",e.backtrack,e.backtrack.length).concat(table.ushortList("inputGlyph",e.input,e.input.length+1)).concat(table.ushortList("lookaheadGlyph",e.lookahead,e.lookahead.length)).concat(table.ushortList("substitution",[],e.lookupRecords.length));return e.lookupRecords.forEach(function(e,r){t=t.concat({name:"sequenceIndex"+r,type:"USHORT",value:e.sequenceIndex}).concat({name:"lookupListIndex"+r,type:"USHORT",value:e.lookupListIndex})}),new table.Table("chainRuleTable",t)}))})));return t}if(2===e.substFormat)check.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(3===e.substFormat){var r=[{name:"substFormat",type:"USHORT",value:e.substFormat}];r.push({name:"backtrackGlyphCount",type:"USHORT",value:e.backtrackCoverage.length}),e.backtrackCoverage.forEach(function(e,t){r.push({name:"backtrackCoverage"+t,type:"TABLE",value:new table.Coverage(e)})}),r.push({name:"inputGlyphCount",type:"USHORT",value:e.inputCoverage.length}),e.inputCoverage.forEach(function(e,t){r.push({name:"inputCoverage"+t,type:"TABLE",value:new table.Coverage(e)})}),r.push({name:"lookaheadGlyphCount",type:"USHORT",value:e.lookaheadCoverage.length}),e.lookaheadCoverage.forEach(function(e,t){r.push({name:"lookaheadCoverage"+t,type:"TABLE",value:new table.Coverage(e)})}),r.push({name:"substitutionCount",type:"USHORT",value:e.lookupRecords.length}),e.lookupRecords.forEach(function(e,t){r=r.concat({name:"sequenceIndex"+t,type:"USHORT",value:e.sequenceIndex}).concat({name:"lookupListIndex"+t,type:"USHORT",value:e.lookupListIndex})});var a=new table.Table("chainContextTable",r);return a}check.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};var gsub={parse:parseGsubTable,make:makeGsubTable},meta={parse:parseMetaTable,make:makeMetaTable},sfnt={make:makeSfntTable,fontToTable:fontToSfntTable,computeCheckSum:computeCheckSum};Layout.prototype={searchTag:searchTag,binSearch:binSearch,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map(function(e){return e.tag}):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,r=0;r<e.scripts.length;r++){var a=e.scripts[r].tag;if("DFLT"===a)return a;"latn"===a&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var r=this.getTable(t);if(r){e=e||"DFLT";var a=r.scripts,n=searchTag(r.scripts,e);if(n>=0)return a[n].script;if(t){var s={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return a.splice(-1-n,0,s),s.script}}},getLangSysTable:function(e,t,r){var a=this.getScriptTable(e,r);if(a){if(!t||"dflt"===t||"DFLT"===t)return a.defaultLangSys;var n=searchTag(a.langSysRecords,t);if(n>=0)return a.langSysRecords[n].langSys;if(r){var s={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return a.langSysRecords.splice(-1-n,0,s),s.langSys}}},getFeatureTable:function(e,t,r,a){var n=this.getLangSysTable(e,t,a);if(n){for(var s,o=n.featureIndexes,i=this.font.tables[this.tableName].features,u=0;u<o.length;u++)if(s=i[o[u]],s.tag===r)return s.feature;if(a){var l=i.length;return check.assert(0===l||r>=i[l-1].tag,"Features must be added in alphabetical order."),s={tag:r,feature:{params:0,lookupListIndexes:[]}},i.push(s),o.push(l),s.feature}}},getLookupTables:function(e,t,r,a,n){var s=this.getFeatureTable(e,t,r,n),o=[];if(s){for(var i,u=s.lookupListIndexes,l=this.font.tables[this.tableName].lookups,p=0;p<u.length;p++)i=l[u[p]],i.lookupType===a&&o.push(i);if(0===o.length&&n){i={lookupType:a,lookupFlag:0,subtables:[],markFilteringSet:void 0};var c=l.length;return l.push(i),u.push(c),[i]}}return o},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var r=searchRange(e.ranges,t);return r?r.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var r=binSearch(e.glyphs,t);return r>=0?r:-1;case 2:var a=searchRange(e.ranges,t);return a?a.index+t-a.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],r=e.ranges,a=0;a<r.length;a++)for(var n=r[a],s=n.start,o=n.end,i=s;i<=o;i++)t.push(i);return t}},Position.prototype=Layout.prototype,Position.prototype.init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},Position.prototype.getKerningValue=function(e,t,r){for(var a=0;a<e.length;a++)for(var n=e[a].subtables,s=0;s<n.length;s++){var o=n[s],i=this.getCoverageIndex(o.coverage,t);if(!(i<0))switch(o.posFormat){case 1:for(var u=o.pairSets[i],l=0;l<u.length;l++){var p=u[l];if(p.secondGlyph===r)return p.value1&&p.value1.xAdvance||0}break;case 2:var c=this.getGlyphClass(o.classDef1,t),h=this.getGlyphClass(o.classDef2,r),f=o.classRecords[c][h];return f.value1&&f.value1.xAdvance||0}}return 0},Position.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)},Substitution.prototype=Layout.prototype,Substitution.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Substitution.prototype.getSingle=function(e,t,r){for(var a=[],n=this.getLookupTables(t,r,e,1),s=0;s<n.length;s++)for(var o=n[s].subtables,i=0;i<o.length;i++){var u=o[i],l=this.expandCoverage(u.coverage),p=void 0;if(1===u.substFormat){var c=u.deltaGlyphId;for(p=0;p<l.length;p++){var h=l[p];a.push({sub:h,by:h+c})}}else{var f=u.substitute;for(p=0;p<l.length;p++)a.push({sub:l[p],by:f[p]})}}return a},Substitution.prototype.getMultiple=function(e,t,r){for(var a=[],n=this.getLookupTables(t,r,e,2),s=0;s<n.length;s++)for(var o=n[s].subtables,i=0;i<o.length;i++){var u=o[i],l=this.expandCoverage(u.coverage),p=void 0;for(p=0;p<l.length;p++){var c=l[p],h=u.sequences[p];a.push({sub:c,by:h})}}return a},Substitution.prototype.getAlternates=function(e,t,r){for(var a=[],n=this.getLookupTables(t,r,e,3),s=0;s<n.length;s++)for(var o=n[s].subtables,i=0;i<o.length;i++)for(var u=o[i],l=this.expandCoverage(u.coverage),p=u.alternateSets,c=0;c<l.length;c++)a.push({sub:l[c],by:p[c]});return a},Substitution.prototype.getLigatures=function(e,t,r){for(var a=[],n=this.getLookupTables(t,r,e,4),s=0;s<n.length;s++)for(var o=n[s].subtables,i=0;i<o.length;i++)for(var u=o[i],l=this.expandCoverage(u.coverage),p=u.ligatureSets,c=0;c<l.length;c++)for(var h=l[c],f=p[c],d=0;d<f.length;d++){var g=f[d];a.push({sub:[h].concat(g.components),by:g.ligGlyph})}return a},Substitution.prototype.addSingle=function(e,t,r,a){var n=this.getLookupTables(r,a,e,1,!0)[0],s=getSubstFormat(n,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});check.assert(1===s.coverage.format,"Single: unable to modify coverage table format "+s.coverage.format);var o=t.sub,i=this.binSearch(s.coverage.glyphs,o);i<0&&(i=-1-i,s.coverage.glyphs.splice(i,0,o),s.substitute.splice(i,0,0)),s.substitute[i]=t.by},Substitution.prototype.addMultiple=function(e,t,r,a){check.assert(t.by instanceof Array&&t.by.length>1,'Multiple: "by" must be an array of two or more ids');var n=this.getLookupTables(r,a,e,2,!0)[0],s=getSubstFormat(n,1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});check.assert(1===s.coverage.format,"Multiple: unable to modify coverage table format "+s.coverage.format);var o=t.sub,i=this.binSearch(s.coverage.glyphs,o);i<0&&(i=-1-i,s.coverage.glyphs.splice(i,0,o),s.sequences.splice(i,0,0)),s.sequences[i]=t.by},Substitution.prototype.addAlternate=function(e,t,r,a){var n=this.getLookupTables(r,a,e,3,!0)[0],s=getSubstFormat(n,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});check.assert(1===s.coverage.format,"Alternate: unable to modify coverage table format "+s.coverage.format);var o=t.sub,i=this.binSearch(s.coverage.glyphs,o);i<0&&(i=-1-i,s.coverage.glyphs.splice(i,0,o),s.alternateSets.splice(i,0,0)),s.alternateSets[i]=t.by},Substitution.prototype.addLigature=function(e,t,r,a){var n=this.getLookupTables(r,a,e,4,!0)[0],s=n.subtables[0];s||(s={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},n.subtables[0]=s),check.assert(1===s.coverage.format,"Ligature: unable to modify coverage table format "+s.coverage.format);var o=t.sub[0],i=t.sub.slice(1),u={ligGlyph:t.by,components:i},l=this.binSearch(s.coverage.glyphs,o);if(l>=0){for(var p=s.ligatureSets[l],c=0;c<p.length;c++)if(arraysEqual(p[c].components,i))return;p.push(u)}else l=-1-l,s.coverage.glyphs.splice(l,0,o),s.ligatureSets.splice(l,0,[u])},Substitution.prototype.getFeature=function(e,t,r){if(/ss\d\d/.test(e))return this.getSingle(e,t,r);switch(e){case"aalt":case"salt":return this.getSingle(e,t,r).concat(this.getAlternates(e,t,r));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,r);case"ccmp":return this.getMultiple(e,t,r).concat(this.getLigatures(e,t,r));case"stch":return this.getMultiple(e,t,r)}},Substitution.prototype.add=function(e,t,r,a){if(/ss\d\d/.test(e))return this.addSingle(e,t,r,a);switch(e){case"aalt":case"salt":return"number"==typeof t.by?this.addSingle(e,t,r,a):this.addAlternate(e,t,r,a);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,r,a);case"ccmp":return t.by instanceof Array?this.addMultiple(e,t,r,a):this.addLigature(e,t,r,a)}};var instructionTable,exec,execGlyph,execComponent,glyf={getPath:getPath,parse:parseGlyfTable},roundSuper=function(e){var t=this.srPeriod,r=this.srPhase,a=this.srThreshold,n=1;return e<0&&(e=-e,n=-1),e+=a-r,e=Math.trunc(e/t)*t,e+=r,e<0?r*n:e*n},xUnitVector={x:1,y:0,axis:"x",distance:function(e,t,r,a){return(r?e.xo:e.x)-(a?t.xo:t.x)},interpolate:function(e,t,r,a){var n,s,o,i,u,l,p;if(!a||a===this)return n=e.xo-t.xo,s=e.xo-r.xo,u=t.x-t.xo,l=r.x-r.xo,o=Math.abs(n),i=Math.abs(s),p=o+i,0===p?void(e.x=e.xo+(u+l)/2):void(e.x=e.xo+(u*i+l*o)/p);n=a.distance(e,t,!0,!0),s=a.distance(e,r,!0,!0),u=a.distance(t,t,!1,!0),l=a.distance(r,r,!1,!0),o=Math.abs(n),i=Math.abs(s),p=o+i,0!==p?xUnitVector.setRelative(e,e,(u*i+l*o)/p,a,!0):xUnitVector.setRelative(e,e,(u+l)/2,a,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,r,a,n){if(a&&a!==this){var s=n?t.xo:t.x,o=n?t.yo:t.y,i=s+r*a.x,u=o+r*a.y;e.x=i+(e.y-u)/a.normalSlope}else e.x=(n?t.xo:t.x)+r},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},yUnitVector={x:0,y:1,axis:"y",distance:function(e,t,r,a){return(r?e.yo:e.y)-(a?t.yo:t.y)},interpolate:function(e,t,r,a){var n,s,o,i,u,l,p;if(!a||a===this)return n=e.yo-t.yo,s=e.yo-r.yo,u=t.y-t.yo,l=r.y-r.yo,o=Math.abs(n),i=Math.abs(s),p=o+i,0===p?void(e.y=e.yo+(u+l)/2):void(e.y=e.yo+(u*i+l*o)/p);n=a.distance(e,t,!0,!0),s=a.distance(e,r,!0,!0),u=a.distance(t,t,!1,!0),l=a.distance(r,r,!1,!0),o=Math.abs(n),i=Math.abs(s),p=o+i,0!==p?yUnitVector.setRelative(e,e,(u*i+l*o)/p,a,!0):yUnitVector.setRelative(e,e,(u+l)/2,a,!0)},normalSlope:0,setRelative:function(e,t,r,a,n){if(a&&a!==this){var s=n?t.xo:t.x,o=n?t.yo:t.y,i=s+r*a.x,u=o+r*a.y;e.y=u+a.normalSlope*(e.x-i)}else e.y=(n?t.yo:t.y)+r},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};Object.freeze(xUnitVector),Object.freeze(yUnitVector),UnitVector.prototype.distance=function(e,t,r,a){return this.x*xUnitVector.distance(e,t,r,a)+this.y*yUnitVector.distance(e,t,r,a)},UnitVector.prototype.interpolate=function(e,t,r,a){var n,s,o,i,u,l,p;o=a.distance(e,t,!0,!0),i=a.distance(e,r,!0,!0),n=a.distance(t,t,!1,!0),s=a.distance(r,r,!1,!0),u=Math.abs(o),l=Math.abs(i),p=u+l,0!==p?this.setRelative(e,e,(n*l+s*u)/p,a,!0):this.setRelative(e,e,(n+s)/2,a,!0)},UnitVector.prototype.setRelative=function(e,t,r,a,n){a=a||this;var s=n?t.xo:t.x,o=n?t.yo:t.y,i=s+r*a.x,u=o+r*a.y,l=a.normalSlope,p=this.slope,c=e.x,h=e.y;e.x=(p*c-l*i+u-h)/(p-l),e.y=p*(e.x-c)+h},UnitVector.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},HPoint.prototype.nextTouched=function(e){
for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},HPoint.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var HPZero=Object.freeze(new HPoint(0,0)),defaultState={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};Hinting.prototype.exec=function(e,t){if("number"!=typeof t)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var r=this.font,a=this._prepState;if(!a||a.ppem!==t){var n=this._fpgmState;if(!n){State.prototype=defaultState,n=this._fpgmState=new State("fpgm",r.tables.fpgm),n.funcs=[],n.font=r,exports.DEBUG&&(console.log("---EXEC FPGM---"),n.step=-1);try{exec(n)}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}State.prototype=n,a=this._prepState=new State("prep",r.tables.prep),a.ppem=t;var s=r.tables.cvt;if(s)for(var o=a.cvt=new Array(s.length),i=t/r.unitsPerEm,u=0;u<s.length;u++)o[u]=s[u]*i;else a.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),a.step=-1);try{exec(a)}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(this._errorState>1))try{return execGlyph(e,a)}catch(e){return this._errorState<1&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},execGlyph=function(e,t){var r,a,n,s=t.ppem/t.font.unitsPerEm,o=s,i=e.components;if(State.prototype=t,i){var u=t.font;a=[],r=[];for(var l=0;l<i.length;l++){var p=i[l],c=u.glyphs.get(p.glyphIndex);n=new State("glyf",c.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+l+"---"),n.step=-1),execComponent(c,n,s,o);for(var h=Math.round(p.dx*s),f=Math.round(p.dy*o),d=n.gZone,g=n.contours,v=0;v<d.length;v++){var m=d[v];m.xTouched=m.yTouched=!1,m.xo=m.x=m.x+h,m.yo=m.y=m.y+f}var y=a.length;a.push.apply(a,d);for(var b=0;b<g.length;b++)r.push(g[b]+y)}e.instructions&&!n.inhibitGridFit&&(n=new State("glyf",e.instructions),n.gZone=n.z0=n.z1=n.z2=a,n.contours=r,a.push(new HPoint(0,0),new HPoint(Math.round(e.advanceWidth*s),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),n.step=-1),exec(n),a.length-=2)}else n=new State("glyf",e.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),n.step=-1),execComponent(e,n,s,o),a=n.gZone;return a},execComponent=function(e,t,r,a){for(var n,s,o,i=e.points||[],u=i.length,l=t.gZone=t.z0=t.z1=t.z2=[],p=t.contours=[],c=0;c<u;c++)n=i[c],l[c]=new HPoint(n.x*r,n.y*a,n.lastPointOfContour,n.onCurve);for(var h=0;h<u;h++)n=l[h],s||(s=n,p.push(h)),n.lastPointOfContour?(n.nextPointOnContour=s,s.prevPointOnContour=n,s=void 0):(o=l[h+1],n.nextPointOnContour=o,o.prevPointOnContour=n);if(!t.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",t.stack);for(var f=0;f<u;f++)console.log(f,l[f].x,l[f].y)}if(l.push(new HPoint(0,0),new HPoint(Math.round(e.advanceWidth*r),0)),exec(t),l.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",t.stack);for(var d=0;d<u;d++)console.log(d,l[d].x,l[d].y)}}},exec=function(e){var t=e.prog;if(t){var r,a=t.length;for(e.ip=0;e.ip<a;e.ip++){if(exports.DEBUG&&e.step++,r=instructionTable[t[e.ip]],!r)throw new Error("unknown instruction: 0x"+Number(t[e.ip]).toString(16));r(e)}}},instructionTable=[SVTCA.bind(void 0,yUnitVector),SVTCA.bind(void 0,xUnitVector),SPVTCA.bind(void 0,yUnitVector),SPVTCA.bind(void 0,xUnitVector),SFVTCA.bind(void 0,yUnitVector),SFVTCA.bind(void 0,xUnitVector),SPVTL.bind(void 0,0),SPVTL.bind(void 0,1),SFVTL.bind(void 0,0),SFVTL.bind(void 0,1),SPVFS,SFVFS,GPV,GFV,SFVTPV,ISECT,SRP0,SRP1,SRP2,SZP0,SZP1,SZP2,SZPS,SLOOP,RTG,RTHG,SMD,ELSE,JMPR,SCVTCI,void 0,void 0,DUP,POP,CLEAR,SWAP,DEPTH,CINDEX,MINDEX,void 0,void 0,void 0,LOOPCALL,CALL,FDEF,void 0,MDAP.bind(void 0,0),MDAP.bind(void 0,1),IUP.bind(void 0,yUnitVector),IUP.bind(void 0,xUnitVector),SHP.bind(void 0,0),SHP.bind(void 0,1),SHC.bind(void 0,0),SHC.bind(void 0,1),SHZ.bind(void 0,0),SHZ.bind(void 0,1),SHPIX,IP,MSIRP.bind(void 0,0),MSIRP.bind(void 0,1),ALIGNRP,RTDG,MIAP.bind(void 0,0),MIAP.bind(void 0,1),NPUSHB,NPUSHW,WS,RS,WCVTP,RCVT,GC.bind(void 0,0),GC.bind(void 0,1),void 0,MD.bind(void 0,0),MD.bind(void 0,1),MPPEM,void 0,FLIPON,void 0,void 0,LT,LTEQ,GT,GTEQ,EQ,NEQ,ODD,EVEN,IF,EIF,AND,OR,NOT,DELTAP123.bind(void 0,1),SDB,SDS,ADD,SUB,DIV,MUL,ABS,NEG,FLOOR,CEILING,ROUND.bind(void 0,0),ROUND.bind(void 0,1),ROUND.bind(void 0,2),ROUND.bind(void 0,3),void 0,void 0,void 0,void 0,WCVTF,DELTAP123.bind(void 0,2),DELTAP123.bind(void 0,3),DELTAC123.bind(void 0,1),DELTAC123.bind(void 0,2),DELTAC123.bind(void 0,3),SROUND,S45ROUND,void 0,void 0,ROFF,void 0,RUTG,RDTG,POP,POP,void 0,void 0,void 0,void 0,void 0,SCANCTRL,SDPVTL.bind(void 0,0),SDPVTL.bind(void 0,1),GETINFO,void 0,ROLL,MAX,MIN,SCANTYPE,INSTCTRL,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,PUSHB.bind(void 0,1),PUSHB.bind(void 0,2),PUSHB.bind(void 0,3),PUSHB.bind(void 0,4),PUSHB.bind(void 0,5),PUSHB.bind(void 0,6),PUSHB.bind(void 0,7),PUSHB.bind(void 0,8),PUSHW.bind(void 0,1),PUSHW.bind(void 0,2),PUSHW.bind(void 0,3),PUSHW.bind(void 0,4),PUSHW.bind(void 0,5),PUSHW.bind(void 0,6),PUSHW.bind(void 0,7),PUSHW.bind(void 0,8),MDRP_MIRP.bind(void 0,0,0,0,0,0),MDRP_MIRP.bind(void 0,0,0,0,0,1),MDRP_MIRP.bind(void 0,0,0,0,0,2),MDRP_MIRP.bind(void 0,0,0,0,0,3),MDRP_MIRP.bind(void 0,0,0,0,1,0),MDRP_MIRP.bind(void 0,0,0,0,1,1),MDRP_MIRP.bind(void 0,0,0,0,1,2),MDRP_MIRP.bind(void 0,0,0,0,1,3),MDRP_MIRP.bind(void 0,0,0,1,0,0),MDRP_MIRP.bind(void 0,0,0,1,0,1),MDRP_MIRP.bind(void 0,0,0,1,0,2),MDRP_MIRP.bind(void 0,0,0,1,0,3),MDRP_MIRP.bind(void 0,0,0,1,1,0),MDRP_MIRP.bind(void 0,0,0,1,1,1),MDRP_MIRP.bind(void 0,0,0,1,1,2),MDRP_MIRP.bind(void 0,0,0,1,1,3),MDRP_MIRP.bind(void 0,0,1,0,0,0),MDRP_MIRP.bind(void 0,0,1,0,0,1),MDRP_MIRP.bind(void 0,0,1,0,0,2),MDRP_MIRP.bind(void 0,0,1,0,0,3),MDRP_MIRP.bind(void 0,0,1,0,1,0),MDRP_MIRP.bind(void 0,0,1,0,1,1),MDRP_MIRP.bind(void 0,0,1,0,1,2),MDRP_MIRP.bind(void 0,0,1,0,1,3),MDRP_MIRP.bind(void 0,0,1,1,0,0),MDRP_MIRP.bind(void 0,0,1,1,0,1),MDRP_MIRP.bind(void 0,0,1,1,0,2),MDRP_MIRP.bind(void 0,0,1,1,0,3),MDRP_MIRP.bind(void 0,0,1,1,1,0),MDRP_MIRP.bind(void 0,0,1,1,1,1),MDRP_MIRP.bind(void 0,0,1,1,1,2),MDRP_MIRP.bind(void 0,0,1,1,1,3),MDRP_MIRP.bind(void 0,1,0,0,0,0),MDRP_MIRP.bind(void 0,1,0,0,0,1),MDRP_MIRP.bind(void 0,1,0,0,0,2),MDRP_MIRP.bind(void 0,1,0,0,0,3),MDRP_MIRP.bind(void 0,1,0,0,1,0),MDRP_MIRP.bind(void 0,1,0,0,1,1),MDRP_MIRP.bind(void 0,1,0,0,1,2),MDRP_MIRP.bind(void 0,1,0,0,1,3),MDRP_MIRP.bind(void 0,1,0,1,0,0),MDRP_MIRP.bind(void 0,1,0,1,0,1),MDRP_MIRP.bind(void 0,1,0,1,0,2),MDRP_MIRP.bind(void 0,1,0,1,0,3),MDRP_MIRP.bind(void 0,1,0,1,1,0),MDRP_MIRP.bind(void 0,1,0,1,1,1),MDRP_MIRP.bind(void 0,1,0,1,1,2),MDRP_MIRP.bind(void 0,1,0,1,1,3),MDRP_MIRP.bind(void 0,1,1,0,0,0),MDRP_MIRP.bind(void 0,1,1,0,0,1),MDRP_MIRP.bind(void 0,1,1,0,0,2),MDRP_MIRP.bind(void 0,1,1,0,0,3),MDRP_MIRP.bind(void 0,1,1,0,1,0),MDRP_MIRP.bind(void 0,1,1,0,1,1),MDRP_MIRP.bind(void 0,1,1,0,1,2),MDRP_MIRP.bind(void 0,1,1,0,1,3),MDRP_MIRP.bind(void 0,1,1,1,0,0),MDRP_MIRP.bind(void 0,1,1,1,0,1),MDRP_MIRP.bind(void 0,1,1,1,0,2),MDRP_MIRP.bind(void 0,1,1,1,0,3),MDRP_MIRP.bind(void 0,1,1,1,1,0),MDRP_MIRP.bind(void 0,1,1,1,1,1),MDRP_MIRP.bind(void 0,1,1,1,1,2),MDRP_MIRP.bind(void 0,1,1,1,1,3)],Token.prototype.setState=function(e,t){return this.state[e]=t,this.activeState={key:e,value:this.state[e]},this.activeState},Token.prototype.getState=function(e){return this.state[e]||null},Tokenizer.prototype.inboundIndex=function(e){return e>=0&&e<this.tokens.length},Tokenizer.prototype.composeRUD=function(e){var t=this,r=!0,a=e.map(function(e){return t[e[0]].apply(t,e.slice(1).concat(r))}),n=function(e){return"object"==typeof e&&e.hasOwnProperty("FAIL")};if(a.every(n))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:a.filter(n)};this.dispatch("composeRUD",[a.filter(function(e){return!n(e)})])},Tokenizer.prototype.replaceRange=function(e,t,r,a){t=null!==t?t:this.tokens.length;var n=r.every(function(e){return e instanceof Token});if(!isNaN(e)&&this.inboundIndex(e)&&n){var s=this.tokens.splice.apply(this.tokens,[e,t].concat(r));return a||this.dispatch("replaceToken",[e,t,r]),[s,r]}return{FAIL:"replaceRange: invalid tokens or startIndex."}},Tokenizer.prototype.replaceToken=function(e,t,r){if(!isNaN(e)&&this.inboundIndex(e)&&t instanceof Token){var a=this.tokens.splice(e,1,t);return r||this.dispatch("replaceToken",[e,t]),[a[0],t]}return{FAIL:"replaceToken: invalid token or index."}},Tokenizer.prototype.removeRange=function(e,t,r){t=isNaN(t)?this.tokens.length:t;var a=this.tokens.splice(e,t);return r||this.dispatch("removeRange",[a,e,t]),a},Tokenizer.prototype.removeToken=function(e,t){if(!isNaN(e)&&this.inboundIndex(e)){var r=this.tokens.splice(e,1);return t||this.dispatch("removeToken",[r,e]),r}return{FAIL:"removeToken: invalid token index."}},Tokenizer.prototype.insertToken=function(e,t,r){var a=e.every(function(e){return e instanceof Token});return a?(this.tokens.splice.apply(this.tokens,[t,0].concat(e)),r||this.dispatch("insertToken",[e,t]),e):{FAIL:"insertToken: invalid token(s)."}},Tokenizer.prototype.registerModifier=function(e,t,r){this.events.newToken.subscribe(function(a,n){var s=[a,n],o=null===t||!0===t.apply(this,s),i=[a,n];if(o){var u=r.apply(this,i);a.setState(e,u)}}),this.registeredModifiers.push(e)},Event.prototype.subscribe=function(e){return"function"==typeof e?this.subscribers.push(e)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}},Event.prototype.unsubscribe=function(e){this.subscribers.splice(e,1)},ContextParams.prototype.setCurrentIndex=function(e){this.index=e,this.current=this.context[e],this.backtrack=this.context.slice(0,e),this.lookahead=this.context.slice(e+1)},ContextParams.prototype.get=function(e){switch(!0){case 0===e:return this.current;case e<0&&Math.abs(e)<=this.backtrack.length:return this.backtrack.slice(e)[0];case e>0&&e<=this.lookahead.length:return this.lookahead[e-1];default:return null}},Tokenizer.prototype.rangeToText=function(e){if(e instanceof ContextRange)return this.getRangeTokens(e).map(function(e){return e.char}).join("")},Tokenizer.prototype.getText=function(){return this.tokens.map(function(e){return e.char}).join("")},Tokenizer.prototype.getContext=function(e){var t=this.registeredContexts[e];return t||null},Tokenizer.prototype.on=function(e,t){var r=this.events[e];return r?r.subscribe(t):null},Tokenizer.prototype.dispatch=function(e,t){var r=this,a=this.events[e];a instanceof Event&&a.subscribers.forEach(function(e){e.apply(r,t||[])})},Tokenizer.prototype.registerContextChecker=function(e,t,r){if(this.getContext(e))return{FAIL:"context name '"+e+"' is already registered."};if("function"!=typeof t)return{FAIL:"missing context start check."};if("function"!=typeof r)return{FAIL:"missing context end check."};var a=new ContextChecker(e,t,r);return this.registeredContexts[e]=a,this.contextCheckers.push(a),a},Tokenizer.prototype.getRangeTokens=function(e){var t=e.startIndex+e.endOffset;return[].concat(this.tokens.slice(e.startIndex,t))},Tokenizer.prototype.getContextRanges=function(e){var t=this.getContext(e);return t?t.ranges:{FAIL:"context checker '"+e+"' is not registered."}},Tokenizer.prototype.resetContextsRanges=function(){var e=this.registeredContexts;for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];r.ranges=[]}},Tokenizer.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var e=this.tokens.map(function(e){return e.char}),t=0;t<e.length;t++){var r=new ContextParams(e,t);this.runContextCheck(r)}this.dispatch("updateContextsRanges",[this.registeredContexts])},Tokenizer.prototype.setEndOffset=function(e,t){var r=this.getContext(t).openRange.startIndex,a=new ContextRange(r,e,t),n=this.getContext(t).ranges;return a.rangeId=t+"."+n.length,n.push(a),this.getContext(t).openRange=null,a},Tokenizer.prototype.runContextCheck=function(e){var t=this,r=e.index;this.contextCheckers.forEach(function(a){var n=a.contextName,s=t.getContext(n).openRange;if(!s&&a.checkStart(e)&&(s=new ContextRange(r,null,n),t.getContext(n).openRange=s,t.dispatch("contextStart",[n,r])),s&&a.checkEnd(e)){var o=r-s.startIndex+1,i=t.setEndOffset(o,n);t.dispatch("contextEnd",[n,i])}})},Tokenizer.prototype.tokenize=function(e){this.tokens=[],this.resetContextsRanges();var t=Array.from(e);this.dispatch("start");for(var r=0;r<t.length;r++){var a=t[r],n=new ContextParams(t,r);this.dispatch("next",[n]),this.runContextCheck(n);var s=new Token(a);this.tokens.push(s),this.dispatch("newToken",[s,n])}return this.dispatch("end",[this.tokens]),this.tokens},FeatureQuery.prototype.getDefaultScriptFeaturesIndexes=function(){for(var e=this.font.tables.gsub.scripts,t=0;t<e.length;t++){var r=e[t];if("DFLT"===r.tag)return r.script.defaultLangSys.featureIndexes}return[]},FeatureQuery.prototype.getScriptFeaturesIndexes=function(e){var t=this.font.tables;if(!t.gsub)return[];if(!e)return this.getDefaultScriptFeaturesIndexes();for(var r=this.font.tables.gsub.scripts,a=0;a<r.length;a++){var n=r[a];if(n.tag===e&&n.script.defaultLangSys)return n.script.defaultLangSys.featureIndexes;var s=n.langSysRecords;if(s)for(var o=0;o<s.length;o++){var i=s[o];if(i.tag===e){var u=i.langSys;return u.featureIndexes}}}return this.getDefaultScriptFeaturesIndexes()},FeatureQuery.prototype.mapTagsToFeatures=function(e,t){for(var r={},a=0;a<e.length;a++){var n=e[a].tag,s=e[a].feature;r[n]=s}this.features[t].tags=r},FeatureQuery.prototype.getScriptFeatures=function(e){var t=this.features[e];if(this.features.hasOwnProperty(e))return t;var r=this.getScriptFeaturesIndexes(e);if(!r)return null;var a=this.font.tables.gsub;return t=r.map(function(e){return a.features[e]}),this.features[e]=t,this.mapTagsToFeatures(t,e),t},FeatureQuery.prototype.getSubstitutionType=function(e,t){var r=e.lookupType.toString(),a=t.substFormat.toString();return r+a},FeatureQuery.prototype.getLookupMethod=function(e,t){var r=this,a=this.getSubstitutionType(e,t);switch(a){case"11":return function(e){return singleSubstitutionFormat1.apply(r,[e,t])};case"12":return function(e){return singleSubstitutionFormat2.apply(r,[e,t])};case"63":return function(e){return chainingSubstitutionFormat3.apply(r,[e,t])};case"41":return function(e){return ligatureSubstitutionFormat1.apply(r,[e,t])};case"21":return function(e){return decompositionSubstitutionFormat1.apply(r,[e,t])};default:throw new Error("lookupType: "+e.lookupType+" - substFormat: "+t.substFormat+" is not yet supported")}},FeatureQuery.prototype.lookupFeature=function(e){var t=e.contextParams,r=t.index,a=this.getFeature({tag:e.tag,script:e.script});if(!a)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+e.tag+"' for script '"+e.script+"'.");for(var n=this.getFeatureLookups(a),s=[].concat(t.context),o=0;o<n.length;o++)for(var i=n[o],u=this.getLookupSubtables(i),l=0;l<u.length;l++){var p=u[l],c=this.getSubstitutionType(i,p),h=this.getLookupMethod(i,p),f=void 0;switch(c){case"11":f=h(t.current),f&&s.splice(r,1,new SubstitutionAction({id:11,tag:e.tag,substitution:f}));break;case"12":f=h(t.current),f&&s.splice(r,1,new SubstitutionAction({id:12,tag:e.tag,substitution:f}));break;case"63":f=h(t),Array.isArray(f)&&f.length&&s.splice(r,1,new SubstitutionAction({id:63,tag:e.tag,substitution:f}));break;case"41":f=h(t),f&&s.splice(r,1,new SubstitutionAction({id:41,tag:e.tag,substitution:f}));break;case"21":f=h(t.current),f&&s.splice(r,1,new SubstitutionAction({id:21,tag:e.tag,substitution:f}))}t=new ContextParams(s,r),Array.isArray(f)&&!f.length||(f=null)}return s.length?s:null},FeatureQuery.prototype.supports=function(e){if(!e.script)return!1;this.getScriptFeatures(e.script);var t=this.features.hasOwnProperty(e.script);if(!e.tag)return t;var r=this.features[e.script].some(function(t){return t.tag===e.tag});return t&&r},FeatureQuery.prototype.getLookupSubtables=function(e){return e.subtables||null},FeatureQuery.prototype.getLookupByIndex=function(e){var t=this.font.tables.gsub.lookups;return t[e]||null},FeatureQuery.prototype.getFeatureLookups=function(e){return e.lookupListIndexes.map(this.getLookupByIndex.bind(this))},FeatureQuery.prototype.getFeature=function(e){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(e.script)||this.getScriptFeatures(e.script);var t=this.features[e.script];return t?t.tags[e.tag]?this.features[e.script].tags[e.tag]:null:{FAIL:"No feature for script "+e.script}};var arabicWordCheck={startCheck:arabicWordStartCheck,endCheck:arabicWordEndCheck},arabicSentenceCheck={startCheck:arabicSentenceStartCheck,endCheck:arabicSentenceEndCheck},SUBSTITUTIONS={11:singleSubstitutionFormat1$1,12:singleSubstitutionFormat2$1,63:chainingSubstitutionFormat3$1,41:ligatureSubstitutionFormat1$1},latinWordCheck={startCheck:latinWordStartCheck,endCheck:latinWordEndCheck};Bidi.prototype.setText=function(e){this.text=e},Bidi.prototype.contextChecks={latinWordCheck:latinWordCheck,arabicWordCheck:arabicWordCheck,arabicSentenceCheck:arabicSentenceCheck},Bidi.prototype.registerFeatures=function(e,t){var r=this,a=t.filter(function(t){return r.query.supports({script:e,tag:t})});this.featuresTags.hasOwnProperty(e)?this.featuresTags[e]=this.featuresTags[e].concat(a):this.featuresTags[e]=a},Bidi.prototype.applyFeatures=function(e,t){if(!e)throw new Error("No valid font was provided to apply features");this.query||(this.query=new FeatureQuery(e));for(var r=0;r<t.length;r++){var a=t[r];this.query.supports({script:a.script})&&this.registerFeatures(a.script,a.tags)}},Bidi.prototype.registerModifier=function(e,t,r){this.tokenizer.registerModifier(e,t,r)},Bidi.prototype.checkContextReady=function(e){return!!this.tokenizer.getContext(e)},Bidi.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(applyArabicPresentationForms.call(this),applyArabicRequireLigatures.call(this)),this.checkContextReady("latinWord")&&applyLatinLigatures.call(this),this.checkContextReady("arabicSentence")&&reverseArabicSentences.call(this)},Bidi.prototype.processText=function(e){this.text&&this.text===e||(this.setText(e),tokenizeText.call(this),this.applyFeaturesToContexts())},Bidi.prototype.getBidiText=function(e){return this.processText(e),this.tokenizer.getText()},Bidi.prototype.getTextGlyphs=function(e){this.processText(e);for(var t=[],r=0;r<this.tokenizer.tokens.length;r++){var a=this.tokenizer.tokens[r];if(!a.state.deleted){var n=a.activeState.value;t.push(Array.isArray(n)?n[0]:n)}}return t},Font.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},Font.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},Font.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},Font.prototype.updateFeatures=function(e){return this.defaultRenderOptions.features.map(function(t){return"latn"===t.script?{script:"latn",tags:t.tags.filter(function(t){return e[t]})}:t})},Font.prototype.stringToGlyphs=function(e,t){var r=this,a=new Bidi,n=function(e){return r.charToGlyphIndex(e.char)};a.registerModifier("glyphIndex",null,n);var s=t?this.updateFeatures(t.features):this.defaultRenderOptions.features;a.applyFeatures(this,s);for(var o=a.getTextGlyphs(e),i=o.length,u=new Array(i),l=this.glyphs.get(0),p=0;p<i;p+=1)u[p]=this.glyphs.get(o[p])||l;return u},Font.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},Font.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},Font.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},Font.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var r=this.position.defaultKerningTables;return r?this.position.getKerningValue(r,e,t):this.kerningPairs[e+","+t]||0},Font.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]},Font.prototype.forEachGlyph=function(e,t,r,a,n,s){t=void 0!==t?t:0,r=void 0!==r?r:0,a=void 0!==a?a:72,n=Object.assign({},this.defaultRenderOptions,n);var o,i=1/this.unitsPerEm*a,u=this.stringToGlyphs(e,n);if(n.kerning){var l=n.script||this.position.getDefaultScriptName();o=this.position.getKerningTables(l,n.language)}for(var p=0;p<u.length;p+=1){var c=u[p];if(s.call(this,c,t,r,a,n),c.advanceWidth&&(t+=c.advanceWidth*i),n.kerning&&p<u.length-1){var h=o?this.position.getKerningValue(o,c.index,u[p+1].index):this.getKerningValue(c,u[p+1]);t+=h*i}n.letterSpacing?t+=n.letterSpacing*a:n.tracking&&(t+=n.tracking/1e3*a)}return t},Font.prototype.getPath=function(e,t,r,a,n){var s=new Path;return this.forEachGlyph(e,t,r,a,n,function(e,t,r,a){var o=e.getPath(t,r,a,n,this);s.extend(o)}),s},Font.prototype.getPaths=function(e,t,r,a,n){var s=[];return this.forEachGlyph(e,t,r,a,n,function(e,t,r,a){var o=e.getPath(t,r,a,n,this);s.push(o)}),s},Font.prototype.getAdvanceWidth=function(e,t,r){return this.forEachGlyph(e,0,0,t,r,function(){})},Font.prototype.draw=function(e,t,r,a,n,s){this.getPath(t,r,a,n,s).draw(e)},Font.prototype.drawPoints=function(e,t,r,a,n,s){this.forEachGlyph(t,r,a,n,s,function(t,r,a,n){t.drawPoints(e,r,a,n)})},Font.prototype.drawMetrics=function(e,t,r,a,n,s){this.forEachGlyph(t,r,a,n,s,function(t,r,a,n){t.drawMetrics(e,r,a,n)})},Font.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en},Font.prototype.validate=function(){function e(e,t){}function t(t){var a=r.getEnglishName(t);e(a&&a.trim().length>0)}var r=this;t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),e(this.unitsPerEm>0)},Font.prototype.toTables=function(){return sfnt.fontToTable(this)},Font.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Font.prototype.toArrayBuffer=function(){for(var e=this.toTables(),t=e.encode(),r=new ArrayBuffer(t.length),a=new Uint8Array(r),n=0;n<t.length;n++)a[n]=t[n];return r},Font.prototype.download=function(e){var t=this.getEnglishName("fontFamily"),r=this.getEnglishName("fontSubfamily");e=e||t.replace(/\s/g,"")+"-"+r+".otf";var a=this.toArrayBuffer();if(isBrowser())if(window.URL=window.URL||window.webkitURL,window.URL){var n=new DataView(a),s=new Blob([n],{type:"font/opentype"}),o=document.createElement("a");o.href=window.URL.createObjectURL(s),o.download=e;var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!1),o.dispatchEvent(i)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var u=require("fs"),l=arrayBufferToNodeBuffer(a);u.writeFileSync(e,l)}},Font.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Font.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Font.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var fvar={make:makeFvarTable,parse:parseFvarTable},attachList=function(){return{coverage:this.parsePointer(Parser.coverage),attachPoints:this.parseList(Parser.pointer(Parser.uShortList))}},caretValue=function(){var e=this.parseUShort();return check.argument(1===e||2===e||3===e,"Unsupported CaretValue table version."),1===e?{coordinate:this.parseShort()}:2===e?{pointindex:this.parseShort()}:3===e?{coordinate:this.parseShort()}:void 0},ligGlyph=function(){return this.parseList(Parser.pointer(caretValue))},ligCaretList=function(){return{coverage:this.parsePointer(Parser.coverage),ligGlyphs:this.parseList(Parser.pointer(ligGlyph))}},markGlyphSets=function(){return this.parseUShort(),this.parseList(Parser.pointer(Parser.coverage))},gdef={parse:parseGDEFTable},subtableParsers$1=new Array(10);subtableParsers$1[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(Parser.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(Parser.coverage),values:this.parseValueRecordList()}:void check.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},subtableParsers$1[2]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();check.assert(1===t||2===t,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var r=this.parsePointer(Parser.coverage),a=this.parseUShort(),n=this.parseUShort();if(1===t)return{posFormat:t,coverage:r,valueFormat1:a,valueFormat2:n,pairSets:this.parseList(Parser.pointer(Parser.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(a),value2:this.parseValueRecord(n)}})))};if(2===t){var s=this.parsePointer(Parser.classDef),o=this.parsePointer(Parser.classDef),i=this.parseUShort(),u=this.parseUShort();return{posFormat:t,coverage:r,valueFormat1:a,valueFormat2:n,classDef1:s,classDef2:o,class1Count:i,class2Count:u,classRecords:this.parseList(i,Parser.list(u,function(){return{value1:this.parseValueRecord(a),value2:this.parseValueRecord(n)}}))}}},subtableParsers$1[3]=function(){return{error:"GPOS Lookup 3 not supported"}},subtableParsers$1[4]=function(){return{error:"GPOS Lookup 4 not supported"}},subtableParsers$1[5]=function(){return{error:"GPOS Lookup 5 not supported"}},subtableParsers$1[6]=function(){return{error:"GPOS Lookup 6 not supported"}},subtableParsers$1[7]=function(){return{error:"GPOS Lookup 7 not supported"}},subtableParsers$1[8]=function(){return{error:"GPOS Lookup 8 not supported"}},subtableParsers$1[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var subtableMakers$1=new Array(10),gpos={parse:parseGposTable,make:makeGposTable},kern={parse:parseKernTable},loca={parse:parseLocaTable},opentype=Object.freeze({__proto__:null,Font:Font,Glyph:Glyph,Path:Path,BoundingBox:BoundingBox,_parse:parse,parse:parseBuffer,load:load,loadSync:loadSync});export default opentype;export{BoundingBox,Font,Glyph,Path,parse as _parse,load,loadSync,parseBuffer as parse,Bidi};